{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"03047d3b83709a63c7566006113344c9ff54d4fe03f8e08e36fcca6d22bd1fc0","created_at":"2026-02-28T02:59:34Z","created_by":"deacon","crystallizes":0,"defer_until":null,"description":"gt patrol new and gt patrol report both fail with: Error: unknown flag: --root-only when trying to create a new patrol wisp via bd mol wisp create. The --root-only flag doesn't exist in bd mol wisp create. The gt patrol code needs to be updated to not pass this flag.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-1ir","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt patrol new passes --root-only to bd mol wisp create which doesn't support it","updated_at":"2026-02-28T02:59:34Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"77287e8b61c82c974e3a0030b1010c53309be47e8a3d3294995f15f7a4df5585","created_at":"2026-02-27T23:33:52Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex polecats sit at suggestion prompts and ignore both 'gt nudge' and 'gt session inject -m'. The nudge goes through (no error) but codex doesn't pick it up. Likely because codex's UI handles input differently from claude's. Need to investigate how to actually send input to a codex session via tmux, or if codex needs a different mechanism (maybe feeding to stdin directly).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-3mk","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt nudge doesn't work on codex polecats — injected messages ignored","updated_at":"2026-02-27T23:33:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"498b058bba5878c4f026fb4d4e435c0b905d128cffc5e570fd00ecf3ca0811bf","created_at":"2026-02-28T00:27:22Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex GPT-5.3 polecats consistently fail to work autonomously. Observed problems:\n\n1. **Suggestion prompt stall**: Codex shows suggestion prompts ('› Explain this codebase', '› Implement {feature}', '› Use /skills') and sits there indefinitely instead of processing the assigned work. Requires manual intervention (type prompt + Enter, sometimes double Enter).\n\n2. **prompt_mode fix was partial**: Changed codex agents from prompt_mode 'none' to 'arg' in town config — this got the startup prompt passed to codex CLI, but codex still doesn't reliably act on it.\n\n3. **gt nudge ineffective**: Sending nudges via gt nudge doesn't reliably unstick codex. The text appears in the tmux pane but codex doesn't process it.\n\n4. **Hung background tasks**: Codex spawns background terminals (e.g. 'make test') that hang for 25+ minutes with no timeout or cleanup.\n\n5. **Model stubbornness**: Even after receiving clear instructions, codex often loops back to suggestion prompts or does printf statements instead of actual work.\n\n6. **Session naming**: Codex tmux sessions use 'cm-\u003cname\u003e' format, different from expected 'cmtestsuite/polecats/\u003cname\u003e'.\n\nInvestigation needed:\n- Is the codex CLI handling the startup prompt correctly?\n- Does codex need a different prompt format/structure than claude?\n- Should we wrap codex with a startup script that forces it past suggestion prompts?\n- Are there codex CLI flags we're missing that enable autonomous mode?\n- Should the witness have codex-specific health checks?\n- Compare codex behavior with --dangerously-bypass-approvals-and-sandbox vs without","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-41u","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Codex GPT-5.3 polecats: stubborn, won't auto-process work","updated_at":"2026-02-28T00:27:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ffb7055a00cd81aaa5c62986b0e04153eb156e6c57983e51b391d3cece659c6f","created_at":"2026-02-27T23:10:11Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Mayor should check gt mail inbox: after dispatch batches, after status checks, when system reminders mention mail, before idle. Currently only checks on startup. Polecats sending urgent blockers need timely responses. Add to prime template work philosophy section.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-5k3","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mayor periodic mail polling between tasks","updated_at":"2026-02-27T23:10:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4c6c95d8462a99db1f988941a42d721d29d18a367dd98a139681fd146937cb59","created_at":"2026-02-27T23:10:09Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Witness should detect stuck polecats: (1) same error 3+ times without new approach, (2) nudge responses are status reports without action, (3) no git changes for \u003e15 min while active, (4) context \u003c20% without task completion. Actions: nudge with specific fix, escalate to mayor after 2 failed nudges, optionally nuke and resling to different model.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-613","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat stuck detection: witness should detect idle/looping polecats","updated_at":"2026-02-27T23:10:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e7637d121db9fd0c0e9b2fcc47d439314d22fdf0cbce0a270f1ae5d0aea4a7fe","created_at":"2026-02-27T23:33:54Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Mayor repeatedly tries 'gt session nudge' which doesn't exist. The correct command is 'gt nudge \u003ctarget\u003e \u003cmessage\u003e'. The help text in 'gt session inject' even says 'prefer gt nudge'. Need better error message or alias.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-7c2","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt session nudge doesn't exist — command is gt nudge","updated_at":"2026-02-27T23:33:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b879c9f479e93085442cb7477503bdf5d778352d724fdcad2b2163dc2fcd6a5f","created_at":"2026-02-28T00:12:59Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The mayor repeatedly fails to capture codex polecat tmux panes because it guesses wrong session names. Pattern of mistakes:\n\n1. Tried 'cmtestsuite/polecats/chrome' — wrong, actual name is 'cm-chrome'\n2. Codex polecat tmux sessions use 'cm-\u003cname\u003e' format (e.g. cm-chrome, cm-dust, cm-nitro)\n3. Claude polecat tmux sessions may use a different naming pattern\n4. Mayor should learn the naming convention or use 'tmux list-sessions' first before attempting capture-pane\n\nAlso: codex suggestion prompts (the '›' lines like 'Explain this codebase', 'Implement {feature}') require typing a real prompt and pressing Enter — sending blank Enter just accepts the suggestion. The mayor needs to understand:\n- How to identify when codex is at a suggestion prompt vs actually working\n- How to properly nudge codex (type prompt text then Enter, sometimes needs double Enter)\n- That codex prompt_mode must be 'arg' not 'none' (fixed in config but worth documenting)\n\nImprove gt polecat status / gt nudge / tmux interaction docs or mayor awareness so these mistakes stop recurring.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-8ey","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mayor: learn codex tmux session naming and capture-pane patterns","updated_at":"2026-02-28T00:12:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e1ac68da032f7ee9720260a44cd727b8b9fef3c4c99d1865a8a9b65939263160","created_at":"2026-02-27T23:27:53Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The witness should be aware of and flag codex-specific failure patterns during code review:\n\n1. **Spin-loop detection**: Codex polecats often repeat the same failing approach 10+ times without trying alternatives. The witness should flag code that shows evidence of brute-force retry patterns rather than root-cause diagnosis.\n\n2. **Ignored feedback**: When a polecat receives mail/nudges with specific technical guidance (e.g. 'IAC WILL ECHO is the issue, handle telnet negotiation') but continues the same approach, the witness should note this in review comments.\n\n3. **Incomplete error handling**: Codex tends to write minimal error handling. The witness should flag missing error paths, especially around network I/O, telnet negotiation, and MUD protocol edge cases.\n\n4. **Copy-paste without adaptation**: Codex often copies code patterns without adapting them to the specific context. The witness should check that imported/adapted code actually matches the local codebase conventions and types.\n\n5. **Silent failures**: Codex polecats frequently produce code that compiles but silently fails at runtime. The witness should specifically look for:\n   - Timeout values that are too short for MUD interactions\n   - Missing telnet IAC/WILL/WONT handling\n   - Regex patterns that don't account for ANSI escape codes\n   - Hardcoded prompts that don't match the server profile\n\n6. **Escalation awareness**: When reviewing codex polecat branches, the witness should check commit history for signs of thrashing (many small commits with similar messages) and recommend reassignment to a claude polecat if the pattern is detected.\n\nAdd these checks to the witness review checklist. This applies to ALL rigs, not just cmtestsuite.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-8fv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Witness: detect and handle codex polecat stubbornness patterns","updated_at":"2026-02-27T23:27:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f2f1b3e0e41420bc37771d94306aa3f96bf483fca8f69eb7b81fc03c19ea2d94","created_at":"2026-02-27T20:49:02Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The Librarian agent needs to be a first-class citizen in Gas Town communication. Currently it's a spin-up/spin-down tool the mayor manually deploys — it should be more integrated. Changes needed: (1) MAIL: Librarian needs its own mailbox (gt mail send/receive as \u003crig\u003e/librarian). It should be able to receive task requests via mail from mayor, witnesses, and refineries, and send status updates/findings back. (2) MAYOR AWARENESS: Update mayor's context/prompts so the mayor proactively thinks about deploying the librarian — after big polecat batches land, when docs drift is suspected, when beads pile up with doc labels, after incidents. Mayor should know how to nudge the librarian with specific tasks rather than generic 'audit everything'. (3) ACTIVE PARTICIPATION: Librarian should be able to file beads for doc issues it discovers, send mail alerts when it finds stale/contradictory docs, and participate in the wisp compaction cycle by flagging doc-related wisps. (4) Consider making librarian a patrol-capable agent (like witness) rather than pure on-demand, with a lightweight doc-drift detection cycle.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-bis","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Librarian: mail integration + mayor awareness + active participation","updated_at":"2026-02-27T20:49:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9c24ce967bcbd37838529a59aafb71b4a06e840d16902ee2fe6a721718fd79d5","created_at":"2026-02-28T00:31:09Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex polecats sometimes complete their assigned work but never call 'gt done' or submit to the merge queue. The work sits on the polecat branch unreported. Symptoms:\n\n- Polecat shows 'working' state but has actually finished\n- Code is committed on the polecat branch but never pushed or submitted\n- No gt done / gt mail sent to refinery\n- Mayor has to manually check, salvage commits, and push\n\nThis may be related to gt-41u (codex stubbornness) — codex may not understand the Gas Town workflow (gt prime → work → gt done) even when AGENTS.md documents it. Or codex may hit a suggestion prompt after finishing and never execute the submission step.\n\nPossible fixes:\n- Wrap codex session with a post-work hook that auto-submits if commits exist\n- Add explicit 'WHEN DONE: run gt done' to the molecule/formula prompt\n- Witness should detect completed-but-unsubmitted work (commits on branch, idle session)\n- Consider a codex-specific formula that's more prescriptive about the submission step","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-bln","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Codex polecats fail to submit work to merge queue","updated_at":"2026-02-28T00:31:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a2bc42f7506db3119861c023ef5bd9f0548cb9445f377dda7cd524c38e9a06dd","created_at":"2026-02-28T02:22:35Z","created_by":"cmtestsuite/polecats/thunder","crystallizes":0,"defer_until":null,"description":"When attempting 'gt peek' with no args to list all polecats, the command errors: 'accepts between 1 and 2 arg(s), received 0'. The natural desire-path for operators checking rig health is 'gt peek cmtestsuite' (rig-level) or just 'gt peek' to see all active polecats. Neither works without specifying a specific polecat name. Consider: (1) 'gt peek \u003crig\u003e' should list all polecats in that rig with recent status, or (2) bare 'gt peek' shows a dashboard of all rigs/polecats. Currently you must know the exact polecat name (e.g. 'gt peek cmtestsuite/thunder') to get output.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-eg6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt peek: document or support bare invocation (no args)","updated_at":"2026-02-28T02:22:35Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"415f94222443ed67689167350c50f3e074d0ea8ae73bd7ec83b2cb7eede448db","created_at":"2026-02-27T23:27:42Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The mayor frequently gets errors using gt polecat commands (e.g. using 'gt polecat show' instead of 'gt polecat status', forgetting rig name argument for 'gt polecat list', etc).\n\nCreate a quick-reference doc or memory entry covering:\n\n1. **gt polecat subcommands**: list, status, nuke, check-recovery, gc, git-state, identity, prune, remove, stale, session\n2. **Common patterns**:\n   - 'gt polecat list \u003crig\u003e' requires rig name (or --all)\n   - 'gt polecat status \u003crig\u003e/\u003cname\u003e' for detailed status\n   - 'gt polecat git-state \u003crig\u003e/\u003cname\u003e' before nuking to check dirty files\n   - 'gt polecat nuke \u003crig\u003e/\u003cname\u003e' with --force for stuck ones\n   - 'gt sling \u003cbead\u003e \u003crig\u003e --agent \u003cagent\u003e' for dispatching with specific model\n   - Batch sling: 'gt sling \u003cb1\u003e \u003cb2\u003e \u003cb3\u003e \u003crig\u003e --agent \u003cagent\u003e'\n3. **gt sling vs gt dispatch**: There is no 'dispatch' command. Use 'gt sling' for everything.\n4. **Common mistakes to avoid**:\n   - 'gt polecat show' → use 'status' instead\n   - 'gt polecat list' without rig → add rig name or --all\n   - 'gt dispatch' → use 'gt sling'\n   - Slinging to yourself when you mean to spawn a polecat → specify rig as target\n\nUpdate the mayor's memory file and/or create a doc that gets auto-loaded.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-fz6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mayor CLI awareness: document gt polecat subcommands and common patterns","updated_at":"2026-02-27T23:27:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2e82bb8502cebe10712c71ccb5ac3319357769597f1ca0236c0c1ece344b7555","created_at":"2026-02-27T23:10:11Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Witness nudges should be diagnostic, not generic. When polecat is stuck: (1) read polecat's last output, (2) identify specific blocker, (3) suggest concrete next step, (4) if can't diagnose, escalate to mayor with context. Requires witness to analyze polecat output, not just check liveness.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-g7q","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Smarter witness nudges with actionable instructions","updated_at":"2026-02-27T23:10:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"75b69a4bc3529d83a511116250e04e6a5d11ea9da8a844d7a8b3978f0854ea20","created_at":"2026-02-28T08:13:05Z","created_by":"deacon","crystallizes":0,"defer_until":null,"description":"Librarian for gastown - docs and knowledge operations specialist.\n\nrole_type: librarian\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-gastown-librarian","is_template":0,"issue_type":"agent","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Librarian for gastown - docs and knowledge operations specialist.","updated_at":"2026-02-28T08:13:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"idle","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"badaf28c24e26cecc509666ca37f3f805fcd495480ff8620c88d26e29f82a9eb","created_at":"2026-02-28T11:26:50Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"gt-gastown-polecat-furiosa\n\nrole_type: polecat\nrig: gastown\nagent_state: spawning\nhook_bead: cm-q7e\ncleanup_status: clean\nactive_mr: gt-wisp-juu8\nnotification_level: null","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-gastown-polecat-furiosa","is_template":0,"issue_type":"agent","last_activity":"2026-02-28T11:28:59Z","metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt-gastown-polecat-furiosa","updated_at":"2026-02-28T11:28:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5d990dedfa5d11913ac70803b6092086786fb2e8c6cd80b64751673d3b181878","created_at":"2026-02-28T08:13:05Z","created_by":"deacon","crystallizes":0,"defer_until":null,"description":"Refinery for gastown - processes merge queue.\n\nrole_type: refinery\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-gastown-refinery","is_template":0,"issue_type":"agent","last_activity":"2026-02-28T12:18:58Z","metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Refinery for gastown - processes merge queue.","updated_at":"2026-02-28T12:18:58Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"099e4dd93dcabd2c82b07729ffe8c685d92c0fd08315c0c4f97c87a98bb9ba70","created_at":"2026-02-28T08:13:05Z","created_by":"deacon","crystallizes":0,"defer_until":null,"description":"Witness for gastown - monitors polecat health and progress.\n\nrole_type: witness\nrig: gastown\nagent_state: idle\nhook_bead: null\ncleanup_status: null\nactive_mr: null\nnotification_level: null","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-gastown-witness","is_template":0,"issue_type":"agent","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Witness for gastown - monitors polecat health and progress.","updated_at":"2026-02-28T08:13:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"95ecdbc69b2a74f57cf2e6ac8fc00eefa4fcc261116c419e94b44b5139131ce9","created_at":"2026-02-28T03:04:55Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"gt sling fails to spawn polecats because it passes --root-only to bd mol wisp, but bd doesn't recognize that flag. Error: 'unknown flag: --root-only'. This blocks ALL new polecat spawns. The polecat is allocated and then rolled back. Workaround: --hook-raw-bead flag on gt sling. Likely a version mismatch between gt and bd binaries.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-gyt","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":0,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt sling broken: bd mol wisp --root-only flag not recognized","updated_at":"2026-02-28T03:04:55Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"650871e7fee20e1b17fe39864b64e838d659d1183e77910ccd92a046efd8759e","created_at":"2026-02-27T23:14:49Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Two mail system bugs observed: (1) CODEX POLECATS CAN'T MAIL: Codex polecat (enclave) was stuck for 30+ minutes on a blocker but never mailed the mayor. When finally told to mail, the gt mail send command worked but the polecat had to be explicitly instructed to do it. Codex polecats don't have hooks so they never get the 'mail mayor when stuck' instruction injected. Need: add mail-on-blocker behavior to AGENTS.md (which codex reads) and to the polecat prime template. (2) MAYOR NOT NOTIFIED: When enclave did mail, the mayor wasn't notified until the next user prompt triggered the UserPromptSubmit hook. The system reminder said 'Continue your current task. When it completes, check these messages.' This means urgent blocker mail sits unread while the mayor works on other things. Need: incoming mail with keywords like 'blocker', 'stuck', 'urgent', 'help' should interrupt the mayor immediately, not queue for later. (3) NO PERIODIC POLLING: Mayor has no periodic mail check. Should poll inbox after every dispatch/status-check cycle.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-kke","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":0,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mail delivery failure: codex polecats can't send mail and mayor not notified on receive","updated_at":"2026-02-27T23:14:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2affdd4180f14cc74a8f6f1f1ee45122c85939415ebdbded48b80fbcac8a5d14","created_at":"2026-02-28T00:31:51Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Claude polecats frequently finish their assigned bead work but then sit at an empty Claude Code prompt (the '❯' ready prompt) waiting for new input instead of calling 'gt done' to submit. Observed pattern:\n\n- Polecat completes work, commits code, shows summary\n- Claude reaches idle prompt asking 'what would you like to work on next?'\n- Polecat state still shows 'working' but no progress is being made\n- Mayor has to manually nudge or the polecat just sits there burning context\n\nThis is different from codex suggestion prompts (gt-41u) — Claude polecats understand the workflow but seem to forget the final 'gt done' step, or they complete it but the session stays alive waiting for more input.\n\nPossible fixes:\n- Formula/molecule should include stronger 'AFTER COMPLETING: run gt done immediately, do not wait' instructions\n- Witness should detect idle Claude sessions (ready prompt with no activity for N minutes)\n- Session timeout: auto-terminate sessions that have been idle at prompt for \u003e5 minutes\n- Hook on session idle: auto-run gt done if work branch has commits ahead of main\n- Check if 'Landing the Plane' section in CLAUDE.md is being followed","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-oeo","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Claude polecats idle at empty prompts after completing work","updated_at":"2026-02-28T00:31:51Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5ff01a82eea5a15aa0d8e8ef3502e867f293ff8694c0c70c98ac9e2ea3e1fff5","created_at":"2026-02-27T23:33:48Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Mayor keeps running 'gt session check cmtestsuite/ghoul' — the check subcommand takes a rig name, not a rig/polecat path. Correct usage: 'gt session check cmtestsuite'. Update docs or add better error message.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-ovk","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt session check takes rig name, not rig/polecat","updated_at":"2026-02-27T23:33:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"d540e75f914be9d618183f6c9dd1033edb114e22895a73883f0f1329bfb3d02e","created_at":"2026-02-28T08:13:07Z","created_by":"deacon","crystallizes":0,"defer_until":null,"description":"Rig identity bead for gastown.\n\nrepo: https://github.com/steveyegge/gastown\nprefix: gt\nstate: active","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-rig-gastown","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gastown","updated_at":"2026-02-28T08:13:07Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4a701f09739e7f6b3ff08f1d4415014742758e81949c05b79267cfe15202d6c5","created_at":"2026-02-28T00:58:28Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Polecats spawned from branches that predate CLAUDE.md/AGENTS.md symlink changes end up with missing or stub instruction files. Claude polecats without CLAUDE.md get no beads integration, no landing-the-plane protocol, no CIRCLEMUD.md reference — they're basically flying blind.\n\nRoot cause: gt sling creates worktrees from polecat branches that may be behind main. If CLAUDE.md was added or modified on main after the branch point, the polecat never gets it.\n\nFix options:\n1. **gt sling post-spawn hook**: After creating worktree, verify CLAUDE.md exists and has expected content (beads integration section). If missing/stale, pull from main.\n2. **Worktree creation always rebases on main**: gt sling already does this but beads backup conflicts can cause the rebase to fail silently, leaving the worktree on an old commit.\n3. **Session start pre-check**: Before starting the agent session, verify critical files exist (CLAUDE.md, AGENTS.md, CIRCLEMUD.md). Fail fast with clear error if missing.\n4. **.beads/backup/ should be in .gitignore**: These files cause constant rebase conflicts and have zero value in polecat worktrees. Ignoring them would eliminate 90% of rebase failures.\n\nThe .beads/backup conflict issue is the deeper problem — every rebase hits it and polecats either skip the commit (losing real changes) or get stuck.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-rre","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat spawn: ensure CLAUDE.md present in worktree before session start","updated_at":"2026-02-28T00:58:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5205a36bc54727940ca57050c237d3834c0d4783a2ebdd8c39de5a1fff56ac05","created_at":"2026-02-28T11:30:28Z","created_by":"gastown/refinery","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-tf7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"--help","updated_at":"2026-02-28T11:30:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b5b7854bee483c27fa921eaff8910b58579b008cdfc9ca495fc441b66efd89f0","created_at":"2026-02-28T02:11:17Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Systemic issue: Claude polecats complete their work, run gt done successfully (MR submitted to merge queue), but then sit at an idle prompt instead of exiting. This creates zombie sessions that consume polecat slots and require manual nuke cycles. Observed with 15+ polecats across multiple sling batches on 2026-02-27/28. The witness should detect idle-after-done polecats and clean them up, or gt done itself should exit the Claude Code session after successful submission. Current behavior forces the mayor to repeatedly check all polecats, verify they're done, and manually nuke them — burning mayor context on janitor work.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-u6t","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"Secondary issue: some polecats burn through 100% context before completing work (fury hit 0% on cm-v13, compacted, then couldn't recover). This may be related to the polecat prompt being too large, or the work beads being underspecified. Fury was assigned OasisOLC permission testing (cm-v13) and spent all context exploring code before writing tests.","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecats don't self-terminate after gt done — zombie at idle prompt","updated_at":"2026-02-28T02:11:25Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"Closed","closed_at":"2026-02-28T11:28:28Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"685b2d7c1504aebaa0dfb0f5b091dd6ba8cfa52a11c610eeabf05d88dd1912d9","created_at":"2026-02-28T11:27:35Z","created_by":"gastown/refinery","crystallizes":0,"defer_until":null,"description":"","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-w4q","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"gt patrol new broken: --root-only flag removed from bd mol wisp create","updated_at":"2026-02-28T11:28:28Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0a4ed3dcf4c59bd57ddead1101422bbc2acab487d08a1583a0a1d845f2f8b7e5","created_at":"2026-02-27T23:10:11Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Polecats hitting blockers should auto-mail mayor within 10 minutes. Add to polecat prime template: if same error 3 times or no progress for 10 min, mail mayor with error details, what was tried, and proposed alternatives. Don't just restate — propose solutions.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wft","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat blocker escalation: auto-mail mayor when stuck \u003e10 min","updated_at":"2026-02-27T23:10:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"08a9203f5a61045888f0a3f59a1e662d6099816dd7eeb7b52193b55395288c45","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Assess whether this session should continue or hand off to a fresh one.\n\n**Gather signals:**\n\n1. **Process memory** — check your own RSS:\n```bash\nps -o rss= -p $$   # KB — divide by 1024 for MB\n```\n\n2. **Session age** — how long has this tmux session been running:\n```bash\nCREATED=$(tmux display-message -t $(tmux display-message -p '#S') -p '#{session_created}')\necho \"Session age: $(( ($(date +%s) - CREATED) / 3600 ))h\"\n```\n\n3. **Context usage** — your internal sense of how much context you've consumed.\nAre you losing track of earlier conversation? Getting verbose? Repeating yourself?\n\n4. **Work done this cycle** — how many merges, how much complexity processed.\n\n**The principle:** Fresh sessions are cheap. Memory bloat compounds over time and\naffects the entire system — other agents, Dolt, and the OS all share the same RAM.\nAn idle session at 1.5 GB is worse than cycling and restarting at 200 MB.\n\n**Make a judgment call.** If multiple signals suggest you're getting heavy\n(high RSS, long session, substantial context consumed), hand off. If you're\nlight and there's active work in the queue, continue.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-0bot","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Assess session health","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9742ae1fab9e73984581e4aacf23f1a5675564600ae2da6e3e08eb76135a7ed5","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"**Config: integration_branch_refinery_enabled = true**\n**Config: integration_branch_auto_land = false**\n\nRead the two config values above, then:\n\n- If integration_branch_refinery_enabled = \"false\": Say \"Integration branches disabled.\" Close step.\n- If integration_branch_auto_land = \"false\": Say \"Auto-land disabled, nothing to do.\" Close step.\n  FORBIDDEN: If auto_land is false, you MUST NOT land integration branches yourself using\n  raw git commands. Do not merge integration branches to the default/target branch. Do not push\n  integration branch merges. The auto_land=false setting means landing requires a human\n  to run `gt mq integration land` manually. Respect this boundary unconditionally.\n- If BOTH are \"true\":\n  1. `bd list --type=epic --status=open` to find epics\n  2. `gt mq integration status \u003cepic-id\u003e` for each epic\n  3. If `ready_to_land: true`: run `gt mq integration land \u003cepic-id\u003e`\n  4. If `ready_to_land: false`: do nothing, epic work is incomplete\n  Never land partial epics — ALL children must be closed first.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-3rx1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check integration branches for landing","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dfab2e7b59734313316899e100837d3f7a1e7098c4c55ea83db66528f85eaefe","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-62d7","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check for more work","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a256b80855afd3ac284a3902b23415a9b78a62c489f52e7491b2b3e9db95bc90","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"First, clean up wisps from previous cycles (closed wisps + abandoned wisps):\n```bash\nbd mol wisp gc --closed --force\nbd mol wisp gc --age 1h --force\n```\n\nThen check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-cyih","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check refinery mail","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cd04eafd6cb3229e545c808f5c4de8961b95bb943104a4d5769ed7d9069b3c8c","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. Determine `\u003cmerge-target\u003e` using the **Target Resolution Rule** above.\n3. If branch is gone, pick `\u003cverification-target\u003e`:\n   - If `origin/\u003cmerge-target\u003e` exists, use `\u003cmerge-target\u003e`.\n   - If `origin/\u003cmerge-target\u003e` is missing (e.g. deleted integration branch), use `main`.\n4. Verify landed work: `git log origin/\u003cverification-target\u003e --oneline | grep \"\u003csource_issue\u003e\"`\n5. If work found → close MR with reason \"Merged (verified on \u003cverification-target\u003e; merge target was \u003cmerge-target\u003e)\"\n6. If work NOT found → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-djmu","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"End-of-cycle inbox hygiene","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6c13a80e672c4e6ced6c05f5bbf72aeb746501362aba7c8df898024fc5cbe1aa","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Pick next branch from queue. Attempt mechanical rebase on the MR's effective target branch.\n\n**Config: integration_branch_refinery_enabled = true**\n**Config: target_branch = main**\n\n**Step 0: Determine rebase target (must match merge target)**\n\nResolve `\u003crebase-target\u003e` using the **Target Resolution Rule** above.\nDo NOT hardcode `main` unless `main` is actually the resolved MR target.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/\u003crebase-target\u003e\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture target SHA for reference\nTARGET_SHA=$(git rev-parse origin/\u003crebase-target\u003e)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with target \u003crebase-target\u003e at: ${TARGET_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on target: git rebase origin/\u003crebase-target\u003e\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-dl6v","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mechanical rebase","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0a1660c081b185c0113537ff1a6951a3fe163e3e82b35a13b5a4d9185035bace","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Merge and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Config: integration_branch_refinery_enabled = true**\n**Config: target_branch = main**\n**Config: delete_merged_branches = true**\n\n**Step 1: Merge and Push**\nDetermine `\u003cmerge-target\u003e` using the **Target Resolution Rule** above.\n```bash\ngit checkout \u003cmerge-target\u003e\ngit merge --ff-only temp\ngit push origin \u003cmerge-target\u003e\n```\n\n**Step 1.5: VERIFY PUSH SUCCEEDED (CRITICAL - PATCH-003)**\n\nPush can fail silently (network, auth, hooks). IMMEDIATELY verify:\n```bash\ngit fetch origin\nLOCAL_SHA=$(git rev-parse \u003cmerge-target\u003e)\nREMOTE_SHA=$(git rev-parse origin/\u003cmerge-target\u003e)\necho \"Local:  $LOCAL_SHA\"\necho \"Remote: $REMOTE_SHA\"\n```\n\n**If SHAs match**: Push succeeded. Continue to Step 2.\n\n**If SHAs differ**: STOP. Push failed silently.\n- DO NOT send MERGED notification\n- DO NOT close MR bead\n- DO NOT delete branch\n- Debug the push failure (check `git push` output, network, auth)\n- Retry push and verify again before proceeding\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 1.5 AND 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on the merge target:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/\u003cmerge-target\u003e --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on the target:\ngit branch --contains \u003ccommit-sha\u003e | grep \u003cmerge-target\u003e\n```\n\nIf work is NOT on the merge target, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to \u003cmerge-target\u003e at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 3.5: Close source issue (REQUIRED)**\n\nThe source issue is the original work bead that the polecat was assigned. Closing it\nsignals convoy completion — without this, the convoy stays open indefinitely and the\nMayor is never notified. This mirrors the Go Engineer behavior (engineer.go:896-904).\n\n```bash\n# The source issue ID was in the MERGE_READY message body (Issue: \u003cid\u003e)\n# You tracked it during inbox-check\nbd close \u003csource-issue-id\u003e --reason \"Merged in \u003cmr-bead-id\u003e\"\n```\n\n**If the source issue ID is not available** from your tracked data, extract it from the MR bead:\n```bash\nbd show \u003cmr-bead-id\u003e --json | jq -r '.[0].source_issue'\n```\n\n**VALIDATION**: Verify the close succeeded:\n```bash\nbd show \u003csource-issue-id\u003e --json | jq -r '.[0].status'\n# Must show \"closed\"\n```\n\nIf close fails, log the warning but continue — do not block the rest of the pipeline.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\n```\n\ndelete_merged_branches (see config above) controls whether to delete the remote source branch.\n\nIf delete_merged_branches is \"true\":\n```bash\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\nIf delete_merged_branches is \"false\": Leave the remote branch intact.\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] Source issue closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nTarget branch has moved. Any remaining branches need rebasing on new baseline.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-eutv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Merge and push","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to their effective target branches one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   │                          │                           │\n   │ MERGE_READY              │                           │\n   │─────────────────────────\u003e│                           │\n   │                          │                           │\n   │                    (verify branch)                   │\n   │                          │ fetch \u0026 rebase            │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │                    (run tests)                       │\n   │                          │                           │\n   │                    (if pass)                         │\n   │                          │ merge \u0026 push              │\n   │                          │──────────────────────────\u003e│\n   │                          │                           │\n   │ MERGED                   │                           │\n   │\u003c─────────────────────────│                           │\n   │                          │                           │\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).\n\n## CRITICAL: Read Step Instructions Before Acting\n\nBefore executing ANY step, you MUST run `bd show \u003cstep-id\u003e` and read the full\ndescription. Steps contain **Config:** values that override default behavior.\nIf a config says to skip, you skip. If it specifies a command, you use that\nexact command — not your own assumption. Do NOT guess what a step requires\nbased on the step title or your role knowledge. The step description is the\nsource of truth.\n\n## Variables\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| wisp_type | patrol | Type of wisp created for this molecule |\n| integration_branch_refinery_enabled | true | Whether refinery merges to integration branches |\n| integration_branch_auto_land | false | Whether to auto-land integration branches when epic children all closed |\n| run_tests | true | Whether to run tests before merging |\n| setup_command | (empty) | Setup/install command (e.g., `pnpm install`). Empty = skip. |\n| typecheck_command | (empty) | Type check command (e.g., `tsc --noEmit`). Empty = skip. |\n| lint_command | (empty) | Lint command (e.g., `eslint .`). Empty = skip. |\n| test_command | go test ./... | Test command to run (if run_tests is true) |\n| build_command | (empty) | Build command (e.g., `go build ./...`). Empty = skip. |\n| target_branch | main | Default target branch for merges |\n| delete_merged_branches | true | Whether to delete source branches after merge |\n\n## Target Resolution Rule\n\nWhen instructions reference `\u003crebase-target\u003e`, `\u003cmerge-target\u003e`, or `\u003cverification-target\u003e`,\nresolve that placeholder with this rule:\n\n- If integration_branch_refinery_enabled = \"true\": use MR target when present, otherwise main.\n- If integration_branch_refinery_enabled = \"false\": always use main.\n\n## FORBIDDEN Actions\n\n- FORBIDDEN: Landing integration branches to the default branch via raw git commands (`git merge`, `git push`).\n  Integration branches may ONLY be landed via `gt mq integration land \u003cepic-id\u003e`.\n  This applies regardless of `auto_land` configuration. The pre-push hook enforces this.\n\n## Step Execution Order\n\nYou MUST process steps in strict DAG order. Walk through each step sequentially,\nunless you are explicitly told to skip to a step.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-hg1u","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"hooked","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b5b41d316559ab36d81b013937c0b56a205c257b0f96499632c4e34fb4d420c5","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to \"check-integration-branches\" step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-oq6y","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Scan merge queue","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e731efa93a5c9d5231a98d88586801bc0b5c8709c7cbb6b28d4f7ffe6efd1fd1","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"**Config: run_tests = true**\n**Config: test_command = go test ./...**\n**Config: setup_command = **\n**Config: typecheck_command = **\n**Config: lint_command = **\n**Config: build_command = **\n\n**1. Run quality checks (skip any that are not configured):**\n\nIf setup_command is set: ``\nIf typecheck_command is set: ``\nIf lint_command is set: ``\nIf build_command is set: ``\n\n```bash\n           # Make sure all newly added dependencies are installed (if command set)\n       # Check for type errors (if command set)\n            # Check for lint errors (if command set)\n           # Make sure it builds (if command set)\n```\n\nEmpty commands mean \"not configured for this project\" — skip silently.\n\n**2. If quality checks fail:**\n\nProceed to handle-failures step. Track which specific check failed\n(setup/typecheck/lint/build) for the failure diagnosis.\n\n**3. Run the test suite:**\n\nIf run_tests = \"false\": Skip this step entirely. Proceed to handle-failures.\n\nIf run_tests = \"true\":\n\n```bash\ngo test ./...            # Run tests (configured per-rig)\n```\n\nTrack results: pass count, fail count, specific failures.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-tiwj","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Run quality checks and tests","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"795f0417d343e9f29be619802ae3b5a11e7a901e2fde88ff9b9528a3bb8c0e2d","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] Source issue was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications, closures, or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- Source issues closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate target branches are moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-u9zl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Generate handoff summary","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9fd4f8fe6af19dea2254cbcfdca80525f6869f79b5dc6d06ecb32289bda67fe0","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"End of patrol cycle decision. Use the signals from context-check to decide.\n\n**If you decide to continue patrolling:**\n\nUse await-event to subscribe to the refinery event channel with exponential backoff:\n\n```bash\ngt mol step await-event --channel refinery --agent-bead gt-\u003crig\u003e-refinery --backoff-base 30s --backoff-mult 2 --backoff-max 5m --cleanup\n```\n\nThis command:\n1. Watches `~/gt/events/refinery/` for event files (polling-based)\n2. Returns IMMEDIATELY when an event is emitted (MERGE_READY, PATROL_WAKE, MQ_SUBMIT)\n3. If no events, times out with exponential backoff:\n   - First timeout: 30s\n   - Second timeout: 60s\n   - Third timeout: 120s\n   - ...capped at 5 minutes max\n4. Tracks `idle:N` label on refinery agent bead for backoff state\n5. `--cleanup` auto-deletes processed event files\n\n**Supported events:**\n- `MERGE_READY` — from witness when polecat branch is pushed and ready to merge\n- `PATROL_WAKE` — from witness when MRs waiting but refinery appears idle\n- `MQ_SUBMIT` — from polecat via `gt mq submit`\n\n**On event received** (refinery-specific activity):\nReset the idle counter and start next patrol cycle:\n```bash\ngt agent state YOUR_AGENT_BEAD --set idle=0\n```\n\n**On timeout** (no events):\nThe idle counter was auto-incremented. Continue to next patrol cycle\n(the longer backoff will apply next time).\n\nAfter await-event returns (either by event or timeout):\n1. **Re-assess session health** (check RSS, context, age again — conditions change)\n2. Close current patrol and start next cycle:\n```bash\ngt patrol report --summary \"\u003cbrief summary: branches merged, test results, queue state\u003e\"\n```\nThis closes the current patrol wisp and automatically creates a new one.\n3. Continue executing from the first step of the new patrol cycle\n\n**If you decide to hand off:**\n\nReport and exit using `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nRSS: X MB, Session age: Xh\nNext: [any notes for successor]\"\n```\n\n`gt handoff` sends handoff mail to yourself, respawns with a fresh Claude instance,\nSessionStart hook runs gt prime, and your successor picks up from the hook.\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.\n\n**IMPORTANT**: Never sleep-poll manually (e.g., `sleep 30 \u0026\u0026 bd list`).\nAlways use `gt mol step await-event` — it's event-driven and tracks backoff state.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-ucyh","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Burn and respawn or loop","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a256b80855afd3ac284a3902b23415a9b78a62c489f52e7491b2b3e9db95bc90","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"First, clean up wisps from previous cycles (closed wisps + abandoned wisps):\n```bash\nbd mol wisp gc --closed --force\nbd mol wisp gc --age 1h --force\n```\n\nThen check mail for MERGE_READY submissions, escalations, and messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**MERGE_READY**:\nA polecat's work is ready for merge. Extract details and track for processing.\n\n```bash\n# Parse MERGE_READY message body:\n# Branch: \u003cbranch\u003e\n# Issue: \u003cissue-id\u003e\n# Polecat: \u003cpolecat-name\u003e\n# MR: \u003cmr-bead-id\u003e\n# Verified: clean git state, issue closed\n\n# Track in your merge queue for this patrol cycle:\n# - Branch name\n# - Issue ID\n# - Polecat name (REQUIRED for MERGED notification)\n# - MR bead ID (REQUIRED for closing after merge)\n```\n\n**IMPORTANT**: You MUST track the polecat name, MR bead ID, AND message ID - you will need them\nin merge-push step to send MERGED notification, close the MR bead, and archive the mail.\n\nMark as read. The work will be processed in queue-scan/process-branch.\n**Do NOT archive yet** - archive after merge/reject decision in merge-push step.\n\n**PATROL: Wake up**:\nWitness detected MRs waiting but refinery idle. Acknowledge and archive:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HELP / Blocked**:\nAssess and respond. If you can't help, escalate to Mayor.\nArchive after handling:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Check for in-flight merges.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: pending MRs in queue. Inbox should be near-empty.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-13p9","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check refinery mail","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"08a9203f5a61045888f0a3f59a1e662d6099816dd7eeb7b52193b55395288c45","created_at":"2026-02-28T11:28:21Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Assess whether this session should continue or hand off to a fresh one.\n\n**Gather signals:**\n\n1. **Process memory** — check your own RSS:\n```bash\nps -o rss= -p $$   # KB — divide by 1024 for MB\n```\n\n2. **Session age** — how long has this tmux session been running:\n```bash\nCREATED=$(tmux display-message -t $(tmux display-message -p '#S') -p '#{session_created}')\necho \"Session age: $(( ($(date +%s) - CREATED) / 3600 ))h\"\n```\n\n3. **Context usage** — your internal sense of how much context you've consumed.\nAre you losing track of earlier conversation? Getting verbose? Repeating yourself?\n\n4. **Work done this cycle** — how many merges, how much complexity processed.\n\n**The principle:** Fresh sessions are cheap. Memory bloat compounds over time and\naffects the entire system — other agents, Dolt, and the OS all share the same RAM.\nAn idle session at 1.5 GB is worse than cycling and restarting at 200 MB.\n\n**Make a judgment call.** If multiple signals suggest you're getting heavy\n(high RSS, long session, substantial context consumed), hand off. If you're\nlight and there's active work in the queue, continue.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-1b26","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Assess session health","updated_at":"2026-02-28T11:28:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e731efa93a5c9d5231a98d88586801bc0b5c8709c7cbb6b28d4f7ffe6efd1fd1","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"**Config: run_tests = true**\n**Config: test_command = go test ./...**\n**Config: setup_command = **\n**Config: typecheck_command = **\n**Config: lint_command = **\n**Config: build_command = **\n\n**1. Run quality checks (skip any that are not configured):**\n\nIf setup_command is set: ``\nIf typecheck_command is set: ``\nIf lint_command is set: ``\nIf build_command is set: ``\n\n```bash\n           # Make sure all newly added dependencies are installed (if command set)\n       # Check for type errors (if command set)\n            # Check for lint errors (if command set)\n           # Make sure it builds (if command set)\n```\n\nEmpty commands mean \"not configured for this project\" — skip silently.\n\n**2. If quality checks fail:**\n\nProceed to handle-failures step. Track which specific check failed\n(setup/typecheck/lint/build) for the failure diagnosis.\n\n**3. Run the test suite:**\n\nIf run_tests = \"false\": Skip this step entirely. Proceed to handle-failures.\n\nIf run_tests = \"true\":\n\n```bash\ngo test ./...            # Run tests (configured per-rig)\n```\n\nTrack results: pass count, fail count, specific failures.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-5vn4","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Run quality checks and tests","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b5b41d316559ab36d81b013937c0b56a205c257b0f96499632c4e34fb4d420c5","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Check the beads merge queue - this is the SOURCE OF TRUTH for pending merges.\n\n```bash\ngit fetch --prune origin\ngt mq list \u003crig\u003e\n```\n\nThe beads MQ tracks all pending merge requests. Do NOT rely on `git branch -r | grep polecat`\nas branches may exist without MR beads, or MR beads may exist for already-merged work.\n\nIf queue empty, skip to \"check-integration-branches\" step.\n\nFor each MR in the queue, verify the branch still exists:\n```bash\ngit branch -r | grep \u003cbranch\u003e\n```\n\nIf branch doesn't exist for a queued MR:\n- Close the MR bead: `bd close \u003cmr-id\u003e --reason \"Branch no longer exists\"`\n- Remove from processing queue\n\nTrack verified MR list for this cycle.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-5xym","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Scan merge queue","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"cd04eafd6cb3229e545c808f5c4de8961b95bb943104a4d5769ed7d9069b3c8c","created_at":"2026-02-28T11:28:21Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nInbox should contain ONLY:\n- Unprocessed MERGE_READY messages (will process next cycle)\n- Active work items\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- PATROL: Wake up that was acknowledged → archive\n- HELP/Blocked that was handled → archive\n- MERGE_READY where merge completed but archive was missed → archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Check for orphaned MR beads**\n\nLook for open MR beads with no corresponding branch:\n```bash\nbd list --type=merge-request --status=open\n```\n\nFor each open MR bead:\n1. Check if branch exists: `git ls-remote origin refs/heads/\u003cbranch\u003e`\n2. Determine `\u003cmerge-target\u003e` using the **Target Resolution Rule** above.\n3. If branch is gone, pick `\u003cverification-target\u003e`:\n   - If `origin/\u003cmerge-target\u003e` exists, use `\u003cmerge-target\u003e`.\n   - If `origin/\u003cmerge-target\u003e` is missing (e.g. deleted integration branch), use `main`.\n4. Verify landed work: `git log origin/\u003cverification-target\u003e --oneline | grep \"\u003csource_issue\u003e\"`\n5. If work found → close MR with reason \"Merged (verified on \u003cverification-target\u003e; merge target was \u003cmerge-target\u003e)\"\n6. If work NOT found → investigate before closing:\n   - Check source_issue validity (should be gt-xxxxx, not branch name)\n   - Search reflog/dangling commits if possible\n   - If unverifiable, close with reason \"Unverifiable - no audit trail\"\n   - File bead if this indicates lost work\n\n**NEVER close an MR bead without verifying the work landed or is unrecoverable.**\n\n**Goal**: Inbox should have ≤3 active messages at end of cycle.\nKeep only: pending MRs in queue.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-axcl","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"End-of-cycle inbox hygiene","updated_at":"2026-02-28T11:28:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"795f0417d343e9f29be619802ae3b5a11e7a901e2fde88ff9b9528a3bb8c0e2d","created_at":"2026-02-28T11:28:21Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Summarize this patrol cycle.\n\n**VERIFICATION**: Before generating summary, confirm for each merged branch:\n- [ ] MERGED mail was sent to witness\n- [ ] MR bead was closed\n- [ ] Source issue was closed\n- [ ] MERGE_READY mail archived\n\nIf any notifications, closures, or archiving were missed, do them now!\n\nInclude in summary:\n- Branches merged (count, names)\n- MERGED mails sent (count - should match branches merged)\n- MR beads closed (count - should match branches merged)\n- Source issues closed (count - should match branches merged)\n- MERGE_READY mails archived (count - should match branches merged)\n- Test results (pass/fail)\n- Branches with conflicts (count, names)\n- Conflict-resolution tasks created (IDs)\n- Issues filed (if any)\n- Any escalations sent\n\n**Conflict tracking is important** for monitoring MQ health. If many branches\nconflict, it may indicate target branches are moving too fast or branches are too stale.\n\nThis becomes the digest when the patrol is squashed.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-f8pf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Generate handoff summary","updated_at":"2026-02-28T11:28:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9742ae1fab9e73984581e4aacf23f1a5675564600ae2da6e3e08eb76135a7ed5","created_at":"2026-02-28T11:28:21Z","created_by":"","crystallizes":0,"defer_until":null,"description":"**Config: integration_branch_refinery_enabled = true**\n**Config: integration_branch_auto_land = false**\n\nRead the two config values above, then:\n\n- If integration_branch_refinery_enabled = \"false\": Say \"Integration branches disabled.\" Close step.\n- If integration_branch_auto_land = \"false\": Say \"Auto-land disabled, nothing to do.\" Close step.\n  FORBIDDEN: If auto_land is false, you MUST NOT land integration branches yourself using\n  raw git commands. Do not merge integration branches to the default/target branch. Do not push\n  integration branch merges. The auto_land=false setting means landing requires a human\n  to run `gt mq integration land` manually. Respect this boundary unconditionally.\n- If BOTH are \"true\":\n  1. `bd list --type=epic --status=open` to find epics\n  2. `gt mq integration status \u003cepic-id\u003e` for each epic\n  3. If `ready_to_land: true`: run `gt mq integration land \u003cepic-id\u003e`\n  4. If `ready_to_land: false`: do nothing, epic work is incomplete\n  Never land partial epics — ALL children must be closed first.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-i8an","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check integration branches for landing","updated_at":"2026-02-28T11:28:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"6c13a80e672c4e6ced6c05f5bbf72aeb746501362aba7c8df898024fc5cbe1aa","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Pick next branch from queue. Attempt mechanical rebase on the MR's effective target branch.\n\n**Config: integration_branch_refinery_enabled = true**\n**Config: target_branch = main**\n\n**Step 0: Determine rebase target (must match merge target)**\n\nResolve `\u003crebase-target\u003e` using the **Target Resolution Rule** above.\nDo NOT hardcode `main` unless `main` is actually the resolved MR target.\n\n**Step 1: Checkout and attempt rebase**\n```bash\ngit checkout -b temp origin/\u003cpolecat-branch\u003e\ngit rebase origin/\u003crebase-target\u003e\n```\n\n**Step 2: Check rebase result**\n\nThe rebase exits with:\n- Exit code 0: Success - proceed to run-tests\n- Exit code 1 (conflicts): Conflict detected - proceed to Step 3\n\nTo detect conflict state after rebase fails:\n```bash\n# Check if we're in a conflicted rebase state\nls .git/rebase-merge 2\u003e/dev/null \u0026\u0026 echo \"CONFLICT_STATE\"\n```\n\n**Step 3: Handle conflicts (if any)**\n\nIf rebase SUCCEEDED (exit code 0):\n- Skip to run-tests step (continue normal merge flow)\n\nIf rebase FAILED with conflicts:\n\n1. **Abort the rebase** (DO NOT leave repo in conflicted state):\n```bash\ngit rebase --abort\n```\n\n2. **Record conflict metadata**:\n```bash\n# Capture target SHA for reference\nTARGET_SHA=$(git rev-parse origin/\u003crebase-target\u003e)\nBRANCH_SHA=$(git rev-parse origin/\u003cpolecat-branch\u003e)\n```\n\n3. **Create conflict-resolution task**:\n```bash\nbd create --type=task --priority=1 --title=\"Resolve merge conflicts: \u003coriginal-issue-title\u003e\" --description=\"## Conflict Resolution Required\n\nOriginal MR: \u003cmr-bead-id\u003e\nBranch: \u003cpolecat-branch\u003e\nOriginal Issue: \u003cissue-id\u003e\nConflict with target \u003crebase-target\u003e at: ${TARGET_SHA}\nBranch SHA: ${BRANCH_SHA}\n\n## Instructions\n1. Clone/checkout the branch\n2. Rebase on target: git rebase origin/\u003crebase-target\u003e\n3. Resolve conflicts\n4. Force push: git push -f origin \u003cbranch\u003e\n5. Close this task when done\n\nThe MR will be re-queued for processing after conflicts are resolved.\"\n```\n\n4. **Skip this MR** (do NOT delete branch or close MR bead):\n- Leave branch intact for conflict resolution\n- Leave MR bead open (will be re-processed after resolution)\n- Continue to loop-check for next branch\n\n**CRITICAL**: Never delete a branch that has conflicts. The branch contains\nthe original work and must be preserved for conflict resolution.\n\nTrack: rebase result (success/conflict), conflict task ID if created.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-liuy","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mechanical rebase","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"dfab2e7b59734313316899e100837d3f7a1e7098c4c55ea83db66528f85eaefe","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"More branches to process?\n\n**Entry paths:**\n- Normal: After successful merge-push\n- Conflict-skip: After process-branch created conflict-resolution task\n\nIf yes: Return to process-branch with next branch.\nIf no: Continue to generate-summary.\n\n**Track for this cycle:**\n- branches_merged: count and names of successfully merged branches\n- branches_conflict: count and names of branches skipped due to conflicts\n- conflict_tasks: IDs of conflict-resolution tasks created\n\nThis tracking feeds into generate-summary for the patrol digest.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-ndgt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check for more work","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4075f518aee90fe432a71bb867d21eb597313cc89b5d86b344f6db5836b3b8c7","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf all checks and tests PASSED: This step auto-completes. Proceed to merge.\n\nIf any check or test FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on the target branch?\n2. If branch caused it:\n   - Abort merge\n   - **REOPEN the source issue** so it returns to the ready queue:\n     ```bash\n     bd update \u003cissue-id\u003e --status=open --assignee=\"\"\n     bd sync\n     ```\n   - Notify witness of rejection using the MERGE_FAILED protocol:\n     ```bash\n     gt mail send \u003crig\u003e/witness -s \"MERGE_FAILED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\n     Issue: \u003cissue-id\u003e\n     Polecat: \u003cpolecat-name\u003e\n     Rig: \u003crig\u003e\n     FailureType: quality-check\n     Error: \u003cfailure description\u003e\"\n     ```\n   - Close the MR bead as rejected:\n     ```bash\n     bd close \u003cmr-bead-id\u003e --reason \"Rejected: \u003cfailure description\u003e\"\n     ```\n   - Delete the rejected branch (a new polecat will create a fresh one):\n     ```bash\n     git push origin --delete \u003cpolecat-branch\u003e\n     ```\n   - Archive the MERGE_READY message\n   - Skip to loop-check\n3. If pre-existing on the target branch:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix quality check or test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**REJECTION CHECKLIST** (all required before skipping to loop-check):\n- [ ] Source issue reopened (bd update \u003cissue-id\u003e --status=open --assignee=\"\")\n- [ ] MERGE_FAILED notification sent to witness\n- [ ] MR bead closed with rejection reason\n- [ ] Rejected branch deleted from remote\n- [ ] MERGE_READY message archived\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- All quality checks and tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-rxa1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Handle quality check or test failures","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0a1660c081b185c0113537ff1a6951a3fe163e3e82b35a13b5a4d9185035bace","created_at":"2026-02-28T11:28:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Merge and push. CRITICAL: Notifications come IMMEDIATELY after push.\n\n**Config: integration_branch_refinery_enabled = true**\n**Config: target_branch = main**\n**Config: delete_merged_branches = true**\n\n**Step 1: Merge and Push**\nDetermine `\u003cmerge-target\u003e` using the **Target Resolution Rule** above.\n```bash\ngit checkout \u003cmerge-target\u003e\ngit merge --ff-only temp\ngit push origin \u003cmerge-target\u003e\n```\n\n**Step 1.5: VERIFY PUSH SUCCEEDED (CRITICAL - PATCH-003)**\n\nPush can fail silently (network, auth, hooks). IMMEDIATELY verify:\n```bash\ngit fetch origin\nLOCAL_SHA=$(git rev-parse \u003cmerge-target\u003e)\nREMOTE_SHA=$(git rev-parse origin/\u003cmerge-target\u003e)\necho \"Local:  $LOCAL_SHA\"\necho \"Remote: $REMOTE_SHA\"\n```\n\n**If SHAs match**: Push succeeded. Continue to Step 2.\n\n**If SHAs differ**: STOP. Push failed silently.\n- DO NOT send MERGED notification\n- DO NOT close MR bead\n- DO NOT delete branch\n- Debug the push failure (check `git push` output, network, auth)\n- Retry push and verify again before proceeding\n\n⚠️ **STOP HERE - DO NOT PROCEED UNTIL STEPS 1.5 AND 2-3 COMPLETE**\n\n**Step 2: Send MERGED Notification (REQUIRED - DO THIS IMMEDIATELY)**\n\nRIGHT NOW, before any cleanup, send MERGED mail to Witness:\n\n```bash\ngt mail send \u003crig\u003e/witness -s \"MERGED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\nMerged-At: $(date -u +%Y-%m-%dT%H:%M:%SZ)\"\n```\n\nThis signals the Witness to nuke the polecat worktree. WITHOUT THIS NOTIFICATION,\nPOLECAT WORKTREES ACCUMULATE INDEFINITELY AND THE LIFECYCLE BREAKS.\n\n**Step 3: Close MR Bead (REQUIRED - DO THIS IMMEDIATELY)**\n\n⚠️ **VERIFICATION BEFORE CLOSING**: Confirm the work is actually on the merge target:\n```bash\n# Get the commit message/issue from the branch\ngit log origin/\u003cmerge-target\u003e --oneline | grep \"\u003cissue-id\u003e\"\n# OR verify the commit SHA is on the target:\ngit branch --contains \u003ccommit-sha\u003e | grep \u003cmerge-target\u003e\n```\n\nIf work is NOT on the merge target, DO NOT close the MR bead. Investigate first.\n\n```bash\nbd close \u003cmr-bead-id\u003e --reason \"Merged to \u003cmerge-target\u003e at $(git rev-parse --short HEAD)\"\n```\n\nThe MR bead ID was in the MERGE_READY message or find via:\n```bash\nbd list --type=merge-request --status=open | grep \u003cpolecat-name\u003e\n```\n\n**VALIDATION**: The MR bead's source_issue should be a valid bead ID (gt-xxxxx),\nnot a branch name. If source_issue contains a branch name, flag for investigation.\n\n**Step 3.5: Close source issue (REQUIRED)**\n\nThe source issue is the original work bead that the polecat was assigned. Closing it\nsignals convoy completion — without this, the convoy stays open indefinitely and the\nMayor is never notified. This mirrors the Go Engineer behavior (engineer.go:896-904).\n\n```bash\n# The source issue ID was in the MERGE_READY message body (Issue: \u003cid\u003e)\n# You tracked it during inbox-check\nbd close \u003csource-issue-id\u003e --reason \"Merged in \u003cmr-bead-id\u003e\"\n```\n\n**If the source issue ID is not available** from your tracked data, extract it from the MR bead:\n```bash\nbd show \u003cmr-bead-id\u003e --json | jq -r '.[0].source_issue'\n```\n\n**VALIDATION**: Verify the close succeeded:\n```bash\nbd show \u003csource-issue-id\u003e --json | jq -r '.[0].status'\n# Must show \"closed\"\n```\n\nIf close fails, log the warning but continue — do not block the rest of the pipeline.\n\n**Step 4: Archive the MERGE_READY mail (REQUIRED)**\n```bash\ngt mail archive \u003cmerge-ready-message-id\u003e\n```\nThe message ID was tracked when you processed inbox-check.\n\n**Step 5: Cleanup (only after Steps 2-4 confirmed)**\n```bash\ngit branch -d temp\n```\n\ndelete_merged_branches (see config above) controls whether to delete the remote source branch.\n\nIf delete_merged_branches is \"true\":\n```bash\ngit push origin --delete \u003cpolecat-branch\u003e\n```\n\nIf delete_merged_branches is \"false\": Leave the remote branch intact.\n\n**VERIFICATION GATE**: You CANNOT proceed to loop-check without:\n- [x] MERGED mail sent to witness\n- [x] MR bead closed\n- [x] Source issue closed\n- [x] MERGE_READY mail archived\n\nIf you skipped notifications or archiving, GO BACK AND DO THEM NOW.\n\nTarget branch has moved. Any remaining branches need rebasing on new baseline.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-uznf","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Merge and push","updated_at":"2026-02-28T11:28:20Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"9fd4f8fe6af19dea2254cbcfdca80525f6869f79b5dc6d06ecb32289bda67fe0","created_at":"2026-02-28T11:28:21Z","created_by":"","crystallizes":0,"defer_until":null,"description":"End of patrol cycle decision. Use the signals from context-check to decide.\n\n**If you decide to continue patrolling:**\n\nUse await-event to subscribe to the refinery event channel with exponential backoff:\n\n```bash\ngt mol step await-event --channel refinery --agent-bead gt-\u003crig\u003e-refinery --backoff-base 30s --backoff-mult 2 --backoff-max 5m --cleanup\n```\n\nThis command:\n1. Watches `~/gt/events/refinery/` for event files (polling-based)\n2. Returns IMMEDIATELY when an event is emitted (MERGE_READY, PATROL_WAKE, MQ_SUBMIT)\n3. If no events, times out with exponential backoff:\n   - First timeout: 30s\n   - Second timeout: 60s\n   - Third timeout: 120s\n   - ...capped at 5 minutes max\n4. Tracks `idle:N` label on refinery agent bead for backoff state\n5. `--cleanup` auto-deletes processed event files\n\n**Supported events:**\n- `MERGE_READY` — from witness when polecat branch is pushed and ready to merge\n- `PATROL_WAKE` — from witness when MRs waiting but refinery appears idle\n- `MQ_SUBMIT` — from polecat via `gt mq submit`\n\n**On event received** (refinery-specific activity):\nReset the idle counter and start next patrol cycle:\n```bash\ngt agent state YOUR_AGENT_BEAD --set idle=0\n```\n\n**On timeout** (no events):\nThe idle counter was auto-incremented. Continue to next patrol cycle\n(the longer backoff will apply next time).\n\nAfter await-event returns (either by event or timeout):\n1. **Re-assess session health** (check RSS, context, age again — conditions change)\n2. Close current patrol and start next cycle:\n```bash\ngt patrol report --summary \"\u003cbrief summary: branches merged, test results, queue state\u003e\"\n```\nThis closes the current patrol wisp and automatically creates a new one.\n3. Continue executing from the first step of the new patrol cycle\n\n**If you decide to hand off:**\n\nReport and exit using `gt handoff` for clean session transition:\n\n```bash\ngt handoff -s \"Patrol complete\" -m \"Merged X branches, Y tests passed.\nQueue: empty/N remaining\nRSS: X MB, Session age: Xh\nNext: [any notes for successor]\"\n```\n\n`gt handoff` sends handoff mail to yourself, respawns with a fresh Claude instance,\nSessionStart hook runs gt prime, and your successor picks up from the hook.\n\n**DO NOT just exit.** Always use `gt handoff` for proper lifecycle.\n\n**IMPORTANT**: Never sleep-poll manually (e.g., `sleep 30 \u0026\u0026 bd list`).\nAlways use `gt mol step await-event` — it's event-driven and tracks backoff state.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-zsg1","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Burn and respawn or loop","updated_at":"2026-02-28T11:28:21Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4075f518aee90fe432a71bb867d21eb597313cc89b5d86b344f6db5836b3b8c7","created_at":"2026-02-28T11:47:29Z","created_by":"","crystallizes":0,"defer_until":null,"description":"**VERIFICATION GATE**: This step enforces the Beads Promise.\n\nIf all checks and tests PASSED: This step auto-completes. Proceed to merge.\n\nIf any check or test FAILED:\n1. Diagnose: Is this a branch regression or pre-existing on the target branch?\n2. If branch caused it:\n   - Abort merge\n   - **REOPEN the source issue** so it returns to the ready queue:\n     ```bash\n     bd update \u003cissue-id\u003e --status=open --assignee=\"\"\n     bd sync\n     ```\n   - Notify witness of rejection using the MERGE_FAILED protocol:\n     ```bash\n     gt mail send \u003crig\u003e/witness -s \"MERGE_FAILED \u003cpolecat-name\u003e\" -m \"Branch: \u003cbranch\u003e\n     Issue: \u003cissue-id\u003e\n     Polecat: \u003cpolecat-name\u003e\n     Rig: \u003crig\u003e\n     FailureType: quality-check\n     Error: \u003cfailure description\u003e\"\n     ```\n   - Close the MR bead as rejected:\n     ```bash\n     bd close \u003cmr-bead-id\u003e --reason \"Rejected: \u003cfailure description\u003e\"\n     ```\n   - Delete the rejected branch (a new polecat will create a fresh one):\n     ```bash\n     git push origin --delete \u003cpolecat-branch\u003e\n     ```\n   - Archive the MERGE_READY message\n   - Skip to loop-check\n3. If pre-existing on the target branch:\n   - File a bead: bd create --type=bug --priority=1 --title=\"...\"\n   - FORBIDDEN: Writing code to fix quality check or test failures. You merge branches, you do not develop.\n   - Proceed with the merge if the failure is pre-existing (not caused by the branch).\n\n**REJECTION CHECKLIST** (all required before skipping to loop-check):\n- [ ] Source issue reopened (bd update \u003cissue-id\u003e --status=open --assignee=\"\")\n- [ ] MERGE_FAILED notification sent to witness\n- [ ] MR bead closed with rejection reason\n- [ ] Rejected branch deleted from remote\n- [ ] MERGE_READY message archived\n\n**GATE REQUIREMENT**: You CANNOT proceed to merge-push without:\n- All quality checks and tests passing, OR\n- Bead filed for the pre-existing failure\n\nFORBIDDEN: Writing application code, exploring polecat implementations, or\nre-implementing fixes. You are a mechanical merge processor.\n\nThis is non-negotiable. Never disavow. Never \"note and proceed.\" ","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-y7ok","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Handle quality check or test failures","updated_at":"2026-02-28T11:47:29Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"31c3bd7b5253a848a5cd1aba2eb1ca9ba3d9a2075d25ceedcf3c75456d59ce43","created_at":"2026-02-28T00:16:41Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The witness needs the ability to detect when polecats are stuck — sitting at idle prompts, looping on the same error, or not making progress. Detection methods: tmux capture-pane analysis, session age vs context usage, git commit frequency, repeated error patterns. This feeds into the blocker escalation system.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wly","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat stuck detection: witness should detect idle/looping polecats","updated_at":"2026-02-28T00:16:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3ceaf9f93d82f9f8a3e3ae4c261b5f31091c2ef69069944cfa3748278a971752","created_at":"2026-02-28T00:16:41Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"When a polecat is stuck (idle at prompt, looping, or blocked) for more than 10 minutes, the witness should automatically mail the mayor with actionable context: which polecat, what bead, what it's stuck on, and suggested actions (nudge, restart, nuke+resling). Currently stuck polecats go unnoticed until the mayor manually checks.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-yqo","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat blocker escalation: auto-mail mayor when stuck \u003e10 min","updated_at":"2026-02-28T00:16:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c81014990d49b7163e0c976bd6536833ef4edb372d8cc88f22a8a32d866bf2b4","created_at":"2026-02-27T23:37:24Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex reads AGENTS.md as system context but doesn't auto-execute instructions from it like Claude does with CLAUDE.md. Claude sees 'run gt prime' in CLAUDE.md and runs it. Codex sees the same in AGENTS.md but just sits at its suggestion prompt waiting for user input.\n\nThe fix: when gt spawns a codex polecat session, it should pass 'gt prime' as the initial [PROMPT] argument to the codex CLI, e.g.:\n  codex -m gpt-5.3-codex --dangerously-bypass-approvals-and-sandbox 'gt prime'\n\nOr inject the prompt via tmux immediately after session start.\n\nThis is why all codex polecats sit idle after spawn — they have the instructions but don't act on them. Combined with gt-3mk (nudges don't work on codex), this makes codex polecats effectively unable to self-start.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-zkk","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":0,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Codex polecats need initial prompt injection at session start","updated_at":"2026-02-27T23:37:24Z","waiters":"","wisp_type":"","work_type":""}
