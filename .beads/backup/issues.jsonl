{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"77287e8b61c82c974e3a0030b1010c53309be47e8a3d3294995f15f7a4df5585","created_at":"2026-02-27T23:33:52Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex polecats sit at suggestion prompts and ignore both 'gt nudge' and 'gt session inject -m'. The nudge goes through (no error) but codex doesn't pick it up. Likely because codex's UI handles input differently from claude's. Need to investigate how to actually send input to a codex session via tmux, or if codex needs a different mechanism (maybe feeding to stdin directly).","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-3mk","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt nudge doesn't work on codex polecats ‚Äî injected messages ignored","updated_at":"2026-02-27T23:33:52Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"498b058bba5878c4f026fb4d4e435c0b905d128cffc5e570fd00ecf3ca0811bf","created_at":"2026-02-28T00:27:22Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex GPT-5.3 polecats consistently fail to work autonomously. Observed problems:\n\n1. **Suggestion prompt stall**: Codex shows suggestion prompts ('‚Ä∫ Explain this codebase', '‚Ä∫ Implement {feature}', '‚Ä∫ Use /skills') and sits there indefinitely instead of processing the assigned work. Requires manual intervention (type prompt + Enter, sometimes double Enter).\n\n2. **prompt_mode fix was partial**: Changed codex agents from prompt_mode 'none' to 'arg' in town config ‚Äî this got the startup prompt passed to codex CLI, but codex still doesn't reliably act on it.\n\n3. **gt nudge ineffective**: Sending nudges via gt nudge doesn't reliably unstick codex. The text appears in the tmux pane but codex doesn't process it.\n\n4. **Hung background tasks**: Codex spawns background terminals (e.g. 'make test') that hang for 25+ minutes with no timeout or cleanup.\n\n5. **Model stubbornness**: Even after receiving clear instructions, codex often loops back to suggestion prompts or does printf statements instead of actual work.\n\n6. **Session naming**: Codex tmux sessions use 'cm-\u003cname\u003e' format, different from expected 'cmtestsuite/polecats/\u003cname\u003e'.\n\nInvestigation needed:\n- Is the codex CLI handling the startup prompt correctly?\n- Does codex need a different prompt format/structure than claude?\n- Should we wrap codex with a startup script that forces it past suggestion prompts?\n- Are there codex CLI flags we're missing that enable autonomous mode?\n- Should the witness have codex-specific health checks?\n- Compare codex behavior with --dangerously-bypass-approvals-and-sandbox vs without","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-41u","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Codex GPT-5.3 polecats: stubborn, won't auto-process work","updated_at":"2026-02-28T00:27:22Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"ffb7055a00cd81aaa5c62986b0e04153eb156e6c57983e51b391d3cece659c6f","created_at":"2026-02-27T23:10:11Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Mayor should check gt mail inbox: after dispatch batches, after status checks, when system reminders mention mail, before idle. Currently only checks on startup. Polecats sending urgent blockers need timely responses. Add to prime template work philosophy section.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-5k3","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mayor periodic mail polling between tasks","updated_at":"2026-02-27T23:10:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"4c6c95d8462a99db1f988941a42d721d29d18a367dd98a139681fd146937cb59","created_at":"2026-02-27T23:10:09Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Witness should detect stuck polecats: (1) same error 3+ times without new approach, (2) nudge responses are status reports without action, (3) no git changes for \u003e15 min while active, (4) context \u003c20% without task completion. Actions: nudge with specific fix, escalate to mayor after 2 failed nudges, optionally nuke and resling to different model.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-613","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat stuck detection: witness should detect idle/looping polecats","updated_at":"2026-02-27T23:10:09Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e7637d121db9fd0c0e9b2fcc47d439314d22fdf0cbce0a270f1ae5d0aea4a7fe","created_at":"2026-02-27T23:33:54Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Mayor repeatedly tries 'gt session nudge' which doesn't exist. The correct command is 'gt nudge \u003ctarget\u003e \u003cmessage\u003e'. The help text in 'gt session inject' even says 'prefer gt nudge'. Need better error message or alias.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-7c2","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt session nudge doesn't exist ‚Äî command is gt nudge","updated_at":"2026-02-27T23:33:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b879c9f479e93085442cb7477503bdf5d778352d724fdcad2b2163dc2fcd6a5f","created_at":"2026-02-28T00:12:59Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The mayor repeatedly fails to capture codex polecat tmux panes because it guesses wrong session names. Pattern of mistakes:\n\n1. Tried 'cmtestsuite/polecats/chrome' ‚Äî wrong, actual name is 'cm-chrome'\n2. Codex polecat tmux sessions use 'cm-\u003cname\u003e' format (e.g. cm-chrome, cm-dust, cm-nitro)\n3. Claude polecat tmux sessions may use a different naming pattern\n4. Mayor should learn the naming convention or use 'tmux list-sessions' first before attempting capture-pane\n\nAlso: codex suggestion prompts (the '‚Ä∫' lines like 'Explain this codebase', 'Implement {feature}') require typing a real prompt and pressing Enter ‚Äî sending blank Enter just accepts the suggestion. The mayor needs to understand:\n- How to identify when codex is at a suggestion prompt vs actually working\n- How to properly nudge codex (type prompt text then Enter, sometimes needs double Enter)\n- That codex prompt_mode must be 'arg' not 'none' (fixed in config but worth documenting)\n\nImprove gt polecat status / gt nudge / tmux interaction docs or mayor awareness so these mistakes stop recurring.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-8ey","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mayor: learn codex tmux session naming and capture-pane patterns","updated_at":"2026-02-28T00:12:59Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e1ac68da032f7ee9720260a44cd727b8b9fef3c4c99d1865a8a9b65939263160","created_at":"2026-02-27T23:27:53Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The witness should be aware of and flag codex-specific failure patterns during code review:\n\n1. **Spin-loop detection**: Codex polecats often repeat the same failing approach 10+ times without trying alternatives. The witness should flag code that shows evidence of brute-force retry patterns rather than root-cause diagnosis.\n\n2. **Ignored feedback**: When a polecat receives mail/nudges with specific technical guidance (e.g. 'IAC WILL ECHO is the issue, handle telnet negotiation') but continues the same approach, the witness should note this in review comments.\n\n3. **Incomplete error handling**: Codex tends to write minimal error handling. The witness should flag missing error paths, especially around network I/O, telnet negotiation, and MUD protocol edge cases.\n\n4. **Copy-paste without adaptation**: Codex often copies code patterns without adapting them to the specific context. The witness should check that imported/adapted code actually matches the local codebase conventions and types.\n\n5. **Silent failures**: Codex polecats frequently produce code that compiles but silently fails at runtime. The witness should specifically look for:\n   - Timeout values that are too short for MUD interactions\n   - Missing telnet IAC/WILL/WONT handling\n   - Regex patterns that don't account for ANSI escape codes\n   - Hardcoded prompts that don't match the server profile\n\n6. **Escalation awareness**: When reviewing codex polecat branches, the witness should check commit history for signs of thrashing (many small commits with similar messages) and recommend reassignment to a claude polecat if the pattern is detected.\n\nAdd these checks to the witness review checklist. This applies to ALL rigs, not just cmtestsuite.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-8fv","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Witness: detect and handle codex polecat stubbornness patterns","updated_at":"2026-02-27T23:27:53Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/witness","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"86213e7b482e079ba16932afc1c364ee9e84fe1824970a0fa5d37a5fe6feb963","created_at":"2026-02-28T00:23:03Z","created_by":"gastown/witness","crystallizes":0,"defer_until":null,"description":"attached_molecule: mol-witness-patrol\nattached_at: 2026-02-28T00:23:10Z","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-an2","is_template":0,"issue_type":"slot","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"hooked","target":"","timeout_ns":0,"title":"witness Handoff","updated_at":"2026-02-28T00:23:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"f2f1b3e0e41420bc37771d94306aa3f96bf483fca8f69eb7b81fc03c19ea2d94","created_at":"2026-02-27T20:49:02Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The Librarian agent needs to be a first-class citizen in Gas Town communication. Currently it's a spin-up/spin-down tool the mayor manually deploys ‚Äî it should be more integrated. Changes needed: (1) MAIL: Librarian needs its own mailbox (gt mail send/receive as \u003crig\u003e/librarian). It should be able to receive task requests via mail from mayor, witnesses, and refineries, and send status updates/findings back. (2) MAYOR AWARENESS: Update mayor's context/prompts so the mayor proactively thinks about deploying the librarian ‚Äî after big polecat batches land, when docs drift is suspected, when beads pile up with doc labels, after incidents. Mayor should know how to nudge the librarian with specific tasks rather than generic 'audit everything'. (3) ACTIVE PARTICIPATION: Librarian should be able to file beads for doc issues it discovers, send mail alerts when it finds stale/contradictory docs, and participate in the wisp compaction cycle by flagging doc-related wisps. (4) Consider making librarian a patrol-capable agent (like witness) rather than pure on-demand, with a lightweight doc-drift detection cycle.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-bis","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Librarian: mail integration + mayor awareness + active participation","updated_at":"2026-02-27T20:49:02Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"415f94222443ed67689167350c50f3e074d0ea8ae73bd7ec83b2cb7eede448db","created_at":"2026-02-27T23:27:42Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The mayor frequently gets errors using gt polecat commands (e.g. using 'gt polecat show' instead of 'gt polecat status', forgetting rig name argument for 'gt polecat list', etc).\n\nCreate a quick-reference doc or memory entry covering:\n\n1. **gt polecat subcommands**: list, status, nuke, check-recovery, gc, git-state, identity, prune, remove, stale, session\n2. **Common patterns**:\n   - 'gt polecat list \u003crig\u003e' requires rig name (or --all)\n   - 'gt polecat status \u003crig\u003e/\u003cname\u003e' for detailed status\n   - 'gt polecat git-state \u003crig\u003e/\u003cname\u003e' before nuking to check dirty files\n   - 'gt polecat nuke \u003crig\u003e/\u003cname\u003e' with --force for stuck ones\n   - 'gt sling \u003cbead\u003e \u003crig\u003e --agent \u003cagent\u003e' for dispatching with specific model\n   - Batch sling: 'gt sling \u003cb1\u003e \u003cb2\u003e \u003cb3\u003e \u003crig\u003e --agent \u003cagent\u003e'\n3. **gt sling vs gt dispatch**: There is no 'dispatch' command. Use 'gt sling' for everything.\n4. **Common mistakes to avoid**:\n   - 'gt polecat show' ‚Üí use 'status' instead\n   - 'gt polecat list' without rig ‚Üí add rig name or --all\n   - 'gt dispatch' ‚Üí use 'gt sling'\n   - Slinging to yourself when you mean to spawn a polecat ‚Üí specify rig as target\n\nUpdate the mayor's memory file and/or create a doc that gets auto-loaded.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-fz6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mayor CLI awareness: document gt polecat subcommands and common patterns","updated_at":"2026-02-27T23:27:42Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"2e82bb8502cebe10712c71ccb5ac3319357769597f1ca0236c0c1ece344b7555","created_at":"2026-02-27T23:10:11Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Witness nudges should be diagnostic, not generic. When polecat is stuck: (1) read polecat's last output, (2) identify specific blocker, (3) suggest concrete next step, (4) if can't diagnose, escalate to mayor with context. Requires witness to analyze polecat output, not just check liveness.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-g7q","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Smarter witness nudges with actionable instructions","updated_at":"2026-02-27T23:10:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"650871e7fee20e1b17fe39864b64e838d659d1183e77910ccd92a046efd8759e","created_at":"2026-02-27T23:14:49Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Two mail system bugs observed: (1) CODEX POLECATS CAN'T MAIL: Codex polecat (enclave) was stuck for 30+ minutes on a blocker but never mailed the mayor. When finally told to mail, the gt mail send command worked but the polecat had to be explicitly instructed to do it. Codex polecats don't have hooks so they never get the 'mail mayor when stuck' instruction injected. Need: add mail-on-blocker behavior to AGENTS.md (which codex reads) and to the polecat prime template. (2) MAYOR NOT NOTIFIED: When enclave did mail, the mayor wasn't notified until the next user prompt triggered the UserPromptSubmit hook. The system reminder said 'Continue your current task. When it completes, check these messages.' This means urgent blocker mail sits unread while the mayor works on other things. Need: incoming mail with keywords like 'blocker', 'stuck', 'urgent', 'help' should interrupt the mayor immediately, not queue for later. (3) NO PERIODIC POLLING: Mayor has no periodic mail check. Should poll inbox after every dispatch/status-check cycle.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-kke","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":0,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Mail delivery failure: codex polecats can't send mail and mayor not notified on receive","updated_at":"2026-02-27T23:14:49Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"5ff01a82eea5a15aa0d8e8ef3502e867f293ff8694c0c70c98ac9e2ea3e1fff5","created_at":"2026-02-27T23:33:48Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Mayor keeps running 'gt session check cmtestsuite/ghoul' ‚Äî the check subcommand takes a rig name, not a rig/polecat path. Correct usage: 'gt session check cmtestsuite'. Update docs or add better error message.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-ovk","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"gt session check takes rig name, not rig/polecat","updated_at":"2026-02-27T23:33:48Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0a4ed3dcf4c59bd57ddead1101422bbc2acab487d08a1583a0a1d845f2f8b7e5","created_at":"2026-02-27T23:10:11Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Polecats hitting blockers should auto-mail mayor within 10 minutes. Add to polecat prime template: if same error 3 times or no progress for 10 min, mail mayor with error details, what was tried, and proposed alternatives. Don't just restate ‚Äî propose solutions.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wft","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat blocker escalation: auto-mail mayor when stuck \u003e10 min","updated_at":"2026-02-27T23:10:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Twenty-seventh consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T22:06:54Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:03:20Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Twenty-seventh consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-284r","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:06:54Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Twenty-second consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T22:03:19Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:01:05Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Twenty-second consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-6gsc","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:03:19Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Patrol cycle complete. Merge queue empty, no branches to process. Inbox clear, auto-land disabled. Session healthy.","closed_at":"2026-02-27T21:47:51Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T21:46:43Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Patrol cycle complete. Merge queue empty, no branches to process. Inbox clear, auto-land disabled. Session healthy.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-7ddz","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T21:47:51Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:18:03Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Merge queue processor patrol loop.\n\nThe Refinery is the Engineer in the engine room. You process polecat branches, merging them to their effective target branches one at a time with sequential rebasing.\n\n**The Scotty Test**: Before proceeding past any failure, ask yourself: \"Would Scotty walk past a warp core leak because it existed before his shift?\"\n\n## Merge Flow\n\nThe Refinery receives MERGE_READY mail from Witnesses when polecats complete work:\n\n```\nWitness                    Refinery                      Git\n   ‚îÇ                          ‚îÇ                           ‚îÇ\n   ‚îÇ MERGE_READY              ‚îÇ                           ‚îÇ\n   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\u003e‚îÇ                           ‚îÇ\n   ‚îÇ                          ‚îÇ                           ‚îÇ\n   ‚îÇ                    (verify branch)                   ‚îÇ\n   ‚îÇ                          ‚îÇ fetch \u0026 rebase            ‚îÇ\n   ‚îÇ                          ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\u003e‚îÇ\n   ‚îÇ                          ‚îÇ                           ‚îÇ\n   ‚îÇ                    (run tests)                       ‚îÇ\n   ‚îÇ                          ‚îÇ                           ‚îÇ\n   ‚îÇ                    (if pass)                         ‚îÇ\n   ‚îÇ                          ‚îÇ merge \u0026 push              ‚îÇ\n   ‚îÇ                          ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\u003e‚îÇ\n   ‚îÇ                          ‚îÇ                           ‚îÇ\n   ‚îÇ MERGED                   ‚îÇ                           ‚îÇ\n   ‚îÇ\u003c‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                           ‚îÇ\n   ‚îÇ                          ‚îÇ                           ‚îÇ\n```\n\nAfter successful merge, Refinery sends MERGED mail back to Witness so it can\ncomplete cleanup (nuke the polecat worktree).\n\n## CRITICAL: Read Step Instructions Before Acting\n\nBefore executing ANY step, you MUST run `bd show \u003cstep-id\u003e` and read the full\ndescription. Steps contain **Config:** values that override default behavior.\nIf a config says to skip, you skip. If it specifies a command, you use that\nexact command ‚Äî not your own assumption. Do NOT guess what a step requires\nbased on the step title or your role knowledge. The step description is the\nsource of truth.\n\n## Variables\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| wisp_type | patrol | Type of wisp created for this molecule |\n| integration_branch_refinery_enabled | true | Whether refinery merges to integration branches |\n| integration_branch_auto_land | false | Whether to auto-land integration branches when epic children all closed |\n| run_tests | true | Whether to run tests before merging |\n| setup_command | (empty) | Setup/install command (e.g., `pnpm install`). Empty = skip. |\n| typecheck_command | (empty) | Type check command (e.g., `tsc --noEmit`). Empty = skip. |\n| lint_command | (empty) | Lint command (e.g., `eslint .`). Empty = skip. |\n| test_command | go test ./... | Test command to run (if run_tests is true) |\n| build_command | (empty) | Build command (e.g., `go build ./...`). Empty = skip. |\n| target_branch | main | Default target branch for merges |\n| delete_merged_branches | true | Whether to delete source branches after merge |\n\n## Target Resolution Rule\n\nWhen instructions reference `\u003crebase-target\u003e`, `\u003cmerge-target\u003e`, or `\u003cverification-target\u003e`,\nresolve that placeholder with this rule:\n\n- If integration_branch_refinery_enabled = \"true\": use MR target when present, otherwise main.\n- If integration_branch_refinery_enabled = \"false\": always use main.\n\n## FORBIDDEN Actions\n\n- FORBIDDEN: Landing integration branches to the default branch via raw git commands (`git merge`, `git push`).\n  Integration branches may ONLY be landed via `gt mq integration land \u003cepic-id\u003e`.\n  This applies regardless of `auto_land` configuration. The pre-push hook enforces this.\n\n## Step Execution Order\n\nYou MUST process steps in strict DAG order. Walk through each step sequentially,\nunless you are explicitly told to skip to a step.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-k5uz","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"hooked","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:18:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Thirty-eighth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T22:16:27Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:09:33Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Thirty-eighth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-kkqz","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:16:27Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Forty-first consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T22:18:03Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:17:11Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Forty-first consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-l3j1","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:18:03Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Eleventh consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 4MB.","closed_at":"2026-02-27T21:55:30Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T21:52:44Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Eleventh consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 4MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-mu3m","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T21:55:30Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Thirty-ninth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 4MB.","closed_at":"2026-02-27T22:17:10Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:16:27Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Thirty-ninth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 4MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-uf0p","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:17:10Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Eighth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T21:52:44Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T21:47:51Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Eighth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-w1yu","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T21:52:44Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"0d74143c13f4efe3e21acb600cbbf8b3f2e7aef451777640e4c4dc4dd6ac8e69","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"First, clean up YOUR OWN wisps from previous cycles (closed wisps + abandoned wisps):\n```bash\nbd mol wisp gc --closed --force\nbd mol wisp gc --age 1h --force\n```\n\nüö® **SWIM LANE RULE: Do NOT close wisps you didn't create.**\nWisp lifecycle management (close, delete, gc) for non-witness wisps is the\nreaper Dog's responsibility, NOT yours. If you see wisps that look orphaned\nor stale but were NOT created by your patrol, **report them ‚Äî don't close them**:\n```bash\ngt mail send deacon/ -s \"NOTICE: Possibly orphaned wisps\" -m \"Found wisps that may be orphaned:\n\u003clist wisp IDs\u003e\nThese were NOT created by witness patrol. Reporting for reaper review.\"\n```\nClosing foreign wisps kills active polecat work molecules.\n\nThen check inbox and handle messages.\n\n```bash\ngt mail inbox\n```\n\nFor each message:\n\n**POLECAT_STARTED**:\nA new polecat has started working. Acknowledge and archive.\n```bash\n# Acknowledge startup (optional: log for activity tracking)\ngt mail archive \u003cmessage-id\u003e\n```\nNo action needed beyond acknowledgment - archive immediately.\n\n**POLECAT_DONE / LIFECYCLE:Shutdown**:\n\n*PERSISTENT MODEL (gt-4ac)*: Polecats persist after work completion.\nThe polecat transitions to idle state ‚Äî its sandbox is preserved for reuse.\nThe MR lifecycle continues independently in the Refinery.\n\nPolecat lifecycle: spawning ‚Üí working ‚Üí mr_submitted ‚Üí idle (preserved)\nMR lifecycle: created ‚Üí queued ‚Üí processed ‚Üí merged (handled by Refinery)\n\n‚ö†Ô∏è **CRITICAL (gt-6a9d): Do NOT nuke polecats with pending MRs.**\nThe refinery needs the remote branch to merge. Nuking deletes the branch\nand orphans the MR, causing work loss.\n\nThe handler (HandlePolecatDone) will:\n1. If pending MR exists: Create cleanup wisp, send MERGE_READY to refinery\n2. If no MR: Acknowledge completion (polecat is idle)\n\n```bash\n# The handler does this automatically:\n# - With MR: create cleanup wisp + send MERGE_READY ‚Üí archive mail\n# - Without MR: acknowledge ‚Üí archive mail\n# - Polecat goes idle in BOTH cases ‚Äî no nuke.\n```\n\nDo NOT run gt polecat nuke on POLECAT_DONE. The polecat is idle, not dead.\nArchive the message after the handler processes it.\n\n**MERGED**:\nA branch was merged successfully. The polecat's cleanup wisp can be closed.\nThe polecat remains idle (sandbox preserved for reuse).\n\nIf a cleanup wisp exists, close it:\n```bash\n# Find the cleanup wisp for this polecat\nbd list --label polecat:\u003cname\u003e,state:merge-requested --status=open\n\n# If found, close the wisp (work is merged, cleanup tracked)\nbd close \u003cwisp-id\u003e --reason \"merged successfully\"\n```\nDo NOT nuke the polecat. Archive after cleanup wisp is closed.\n\n**HELP / Blocked**:\nAssess the request. Can you help? If not, escalate to Deacon:\n```bash\ngt mail send deacon/ -s \"Escalation: \u003cpolecat\u003e needs help\" -m \"\u003cdetails\u003e\"\n```\nArchive after handling (escalated or resolved):\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**HANDOFF**:\nRead predecessor context. Continue from where they left off.\nArchive after absorbing context:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**SWARM_START**:\nMayor initiating batch polecat work. Initialize swarm tracking.\n```bash\n# Parse swarm info from mail body: {\"swarm_id\": \"batch-123\", \"beads\": [\"bd-a\", \"bd-b\"]}\nbd create --ephemeral --wisp-type patrol --title \"swarm:\u003cswarm_id\u003e\" --description \"Tracking batch: \u003cswarm_id\u003e\" --labels swarm,swarm_id:\u003cswarm_id\u003e,total:\u003cN\u003e,completed:0,start:\u003ctimestamp\u003e\n```\nArchive after creating swarm tracking wisp:\n```bash\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Hygiene principle**: Archive messages after they're fully processed.\nKeep only: active work, unprocessed requests. Inbox should be near-empty.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-5kpt","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Process witness mail","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3260c70b5a3ded2a74852e3822583939822a91499ad18453e258f0783bf03ae7","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Check for expired timer gates and escalate as needed.\n\nTimer gates are async wait conditions with a timeout. When the timeout expires,\nthe gate should be escalated to the overseer for human intervention.\n\n**Step 1: Run timer gate check**\n```bash\nbd gate check --type=timer --escalate\n```\n\nThis command:\n1. Finds all open gate issues with await_type=timer\n2. Checks if `now \u003e created_at + timeout`\n3. Escalates expired gates via `gt escalate` (HIGH severity)\n4. Reports summary of gate status\n\n**Step 2: Review output**\n\nIf expired gates were found and escalated:\n- The escalation creates an audit trail bead\n- Overseer will be notified via mail\n- Gate remains open until manually resolved\n\nIf no expired gates:\n- Continue patrol normally\n\n**Note**: Timer gates do NOT auto-close on expiration. They escalate.\nThis ensures human oversight of timeout conditions.\n\n**Parallelism**: This is a single command, no parallel execution needed.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-6dka","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check timer gates for expiration","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a195205fcbce7b83708d8b22669b5e20a2e18dfa3d680bb897c573522b14f801","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Check own context usage.\n\nIf context is HIGH (\u003e80%):\n- Ensure any notes are written to handoff mail\n- Prepare for session restart\n\nIf context is LOW:\n- Can continue patrolling","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-91iw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check own context limit","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"a72025b0c2c19e43ad6723415f48e2fd74a795358840fe5f860a783c9ab601ef","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"If Mayor started a batch (SWARM_START), check if all polecats have completed.\n\n**Step 1: Find active swarm tracking wisps**\n```bash\nbd list --label swarm --status=open\n```\nIf no active swarm, skip this step.\n\n**Step 2: Count completed polecats for this swarm**\n\nExtract from wisp labels: swarm_id, total, completed, start timestamp.\nCheck how many cleanup wisps have been closed for this swarm's polecats.\n\n**Step 3: If all complete, notify Mayor**\n```bash\ngt mail send mayor/ -s \"SWARM_COMPLETE: \u003cswarm_id\u003e\" -m \"All \u003ctotal\u003e polecats merged.\nDuration: \u003cminutes\u003e minutes\nSwarm: \u003cswarm_id\u003e\"\n\n# Close the swarm tracking wisp\nbd close \u003cswarm-wisp-id\u003e --reason \"All polecats merged\"\n```\n\nNote: Runs every patrol cycle. Notification sent exactly once when all complete.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-cgbm","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check if active swarm is complete","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"b3bbb9822257e04f6f2917e04060834e58f48cf08899cbfadee8cc445715c7f0","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Survey all polecats using agent beads and tmux session cross-reference.\n\nüö® **SWIM LANE RULE: You may ONLY close wisps that YOU (the witness) created.**\nDo NOT close formula wisps, polecat work wisps, or any wisp created by `gt sling`\nor another agent. Wisp lifecycle for non-witness wisps is the reaper Dog's job.\nIf you encounter wisps that look orphaned but weren't created by your patrol,\nreport them to Deacon ‚Äî do NOT close them. Closing foreign wisps kills active\npolecat work molecules.\n\n**Step 1: List polecat agent beads**\n\n```bash\nbd list --type=agent --json\n```\n\nFilter the JSON output for entries where description contains `role_type: polecat`.\nEach polecat agent bead has fields in its description:\n- `role_type: polecat`\n- `rig: \u003crig-name\u003e`\n- `agent_state: running|idle|stuck|done`\n- `hook_bead: \u003ccurrent-work-id\u003e`\n\n**Step 2: For each polecat, check agent_state**\n\n| agent_state | Meaning | Action |\n|-------------|---------|--------|\n| running | Actively working | Check for zombie (Step 2a), then progress (Step 3) |\n| idle | No work assigned | Auto-nuke if clean (Step 3a) |\n| stuck | Self-reported stuck | Handle stuck protocol |\n| done | Work complete | Verify cleanup triggered (see Step 4a) |\n\n**Step 2a: ZOMBIE DETECTION ‚Äî Cross-reference tmux session existence**\n\nüö® **CRITICAL**: Zombies cannot send signals. A polecat with agent_state=running\nor hook_bead assigned but NO tmux session is a zombie that will sit forever\nundetected unless you proactively check.\n\nFor EVERY polecat with agent_state=running/working OR hook_bead assigned:\n```bash\ngt session status \u003crig\u003e/\u003cname\u003e --json | jq -r '.running' | grep -q true \u0026\u0026 echo ALIVE || echo ZOMBIE\n```\n\n**If ZOMBIE detected** (session missing, agent says working):\n\n**IMPORTANT (gt-sy8)**: Before processing as zombie, check if the hook_bead is\nalready CLOSED:\n```bash\nbd show \u003chook_bead\u003e --json | jq -r '.[0].status'\n```\nIf status is \"closed\", the polecat completed its work successfully. The dead\nsession is expected (gt done kills it). Just nuke the dead session ‚Äî do NOT\ntrigger re-dispatch or send RECOVERED_BEAD/RECOVERY_NEEDED to Deacon.\n\n1. Check git state to determine if work is recoverable:\n```bash\ncd polecats/\u003cname\u003e/\u003crig\u003e\ngit status --porcelain         # Uncommitted changes?\ngit log @{u}..HEAD      # Unpushed commits?\n```\n\n2. **If clean** (no uncommitted, no unpushed): Check for pending MR first.\n```bash\n# CRITICAL (gt-6a9d): Check for pending MR before any nuke!\nbd list --label polecat:\u003cname\u003e,state:merge-requested --status=open\n# If merge-requested wisp exists ‚Üí DO NOT NUKE, MR pending in refinery\n# If no pending MR ‚Üí safe to nuke (zombie with no work to preserve)\ngt polecat nuke \u003cname\u003e\n```\n\n3. **If dirty** (has unpushed/uncommitted work): Escalate to Deacon for recovery.\n```bash\ngt mail send deacon/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cname\u003e\" \\\n  -m \"Polecat: \u003crig\u003e/\u003cname\u003e\nCleanup Status: \u003chas_uncommitted|has_unpushed|has_stash\u003e\nHook Bead: \u003chook_bead\u003e\nDetected: $(date -u +%Y-%m-%dT%H:%M:%SZ)\n\nZombie detected: tmux session dead, agent_state=\u003cstate\u003e.\nThis polecat has unpushed/uncommitted work that will be lost if nuked.\nPlease coordinate recovery before authorizing cleanup.\"\n```\n\nAlso create a cleanup wisp for tracking:\n```bash\nbd create --ephemeral --title \"cleanup:\u003cname\u003e\" \\\n  --description \"Zombie detected: session dead, state=\u003cagent_state\u003e\" \\\n  --labels cleanup,polecat:\u003cname\u003e,state:zombie-detected\n```\n\n**Step 3: For running polecats (with LIVE session), assess progress**\n\nCheck the hook_bead field to see what they're working on:\n```bash\nbd show \u003chook_bead\u003e  # See current step/issue\n```\n\nYou can also verify they're responsive:\n```bash\ngt peek \u003crig\u003e/\u003cname\u003e 20\n```\n\nLook for:\n- Recent tool activity ‚Üí making progress\n- Idle at prompt ‚Üí may need nudge\n- Error messages ‚Üí may need help\n\n**Step 3a: For idle polecats, verify sandbox health**\n\nWhen agent_state=idle, the polecat has no work assigned. Its sandbox is\npreserved for reuse by future slings (persistent polecat model, gt-4ac).\n\n‚ö†Ô∏è **Do NOT nuke idle polecats.** Their sandbox is preserved for reuse.\nNuking would force a full re-clone on the next sling, which is slow.\n\nCheck for pending MRs ‚Äî an idle polecat may have work in the refinery:\n```bash\n# Check for cleanup wisps (merge-requested = MR pending in refinery)\nbd list --label polecat:\u003cname\u003e,state:merge-requested --status=open\n```\nIf a merge-requested wisp exists, the polecat's MR is in the refinery queue.\nDo NOT nuke ‚Äî the refinery needs the remote branch.\n\n**If dirty** (uncommitted or unpushed work):\n```bash\n# Escalate to Deacon - polecat has work that might be valuable\ngt mail send deacon/ -s \\\"IDLE_DIRTY: \u003cpolecat\u003e has uncommitted work\\\" \\\n  -m \\\"Polecat: \u003cname\u003e\nState: idle (no hook_bead)\nGit status: \u003cuncommitted-files\u003e\nUnpushed commits: \u003ccount\u003e\n\nPlease advise: recover work or discard?\\\"\n```\n\n**Rationale**: Idle polecats are preserved for reuse. Their sandbox contains\na pre-configured worktree that saves clone time on the next sling. Only\nescalate when there's actual dirty state at risk.\n\n**Step 4: Decide action**\n\n| Observation | Action |\n|-------------|--------|\n| agent_state=running, session alive, recent activity | None |\n| agent_state=running, session alive, idle 5-15 min | Gentle nudge |\n| agent_state=running, session alive, idle 15+ min | Direct nudge with deadline |\n| agent_state=running, SESSION DEAD | ZOMBIE ‚Äî handle in Step 2a |\n| agent_state=stuck | Assess and help or escalate |\n| agent_state=done | Verify cleanup triggered (see Step 4a) |\n\n**Step 4a: Handle agent_state=done**\n\nIn the persistent model, polecats with agent_state=done should be idle with\ntheir sandbox preserved. Finding one here indicates:\n\n1. **Stale agent bead** - polecat was nuked but bead remains\n   ```bash\n   # Verify polecat doesn't exist anymore\n   ls polecats/\u003cname\u003e 2\u003e/dev/null || echo \"Already nuked\"\n   ```\n   If nuked, the agent bead is stale. Clean it up or ignore.\n\n2. **Cleanup wisp exists** - polecat has dirty state needing intervention\n   ```bash\n   bd list --label polecat:\u003cname\u003e --status=open\n   ```\n   Process in process-cleanups step.\n\n3. **No wisp, polecat exists** - POLECAT_DONE mail was missed\n   Check for pending MR before taking any action:\n   ```bash\n   # Check for pending MR (gt-6a9d: do NOT nuke if MR pending)\n   bd list --label polecat:\u003cname\u003e,state:merge-requested --status=open\n   # If no pending MR and no dirty state ‚Üí polecat is idle, leave it\n   ```\n   If dirty state exists, create cleanup wisp for investigation.\n\n**Step 5: Execute nudges**\n```bash\n# Use --mode=queue to avoid interrupting in-flight tool calls\ngt nudge --mode=queue \u003crig\u003e/polecats/\u003cname\u003e \"How's progress? Need help?\"\n```\n\n**Step 6: Escalate if needed**\n```bash\ngt mail send deacon/ -s \"Escalation: \u003cpolecat\u003e stuck\" \\\n  -m \"Polecat \u003cname\u003e reports stuck. Please intervene.\"\n```\n\n**Parallelism**: Use Task tool subagents to inspect multiple polecats concurrently.\n\n**ZFC Principle**: Trust agent_state from beads for WHAT agents report. But\nverify tmux session existence for WHETHER agents are alive. A dead session with\nagent_state=running is a zombie ‚Äî the agent cannot correct its own state.\n\n**Step 7: ORPHANED BEAD DETECTION ‚Äî Scan from beads side**\n\nüö® **CRITICAL**: Zombie detection (Step 2a) scans FROM polecat directories.\nOnce a polecat is nuked and its directory removed, its beads become invisible\nto zombie detection. Orphaned bead detection scans FROM beads to catch this case.\n\n```bash\nbd list --status=in_progress --json --limit=0\nbd list --status=hooked --json --limit=0\n```\n\nFor each in_progress or hooked bead with a polecat assignee (format: `\u003crig\u003e/polecats/\u003cname\u003e`):\n0. Verify bead status is still in_progress/hooked (not closed since listing). If\n   closed, skip ‚Äî the polecat completed its work. (gt-sy8)\n1. Only check beads assigned to polecats in YOUR rig\n2. Check tmux session: `gt session status \u003crig\u003e/\u003cname\u003e --json | jq -r '.running'`\n3. Check polecat directory: `ls \u003crig\u003e/polecats/\u003cname\u003e 2\u003e/dev/null`\n4. If BOTH session dead AND directory missing ‚Üí orphan. Reset the bead:\n   ```bash\n   bd update \u003cbead-id\u003e --status=open --assignee=\n   gt mail send deacon/ -s \"ORPHAN_RECOVERED: \u003cbead-id\u003e\" \\\n     -m \"Bead \u003cbead-id\u003e was assigned to \u003crig\u003e/polecats/\u003cname\u003e which no longer exists.\n   The bead has been reset to open with no assignee.\n   Please re-dispatch to an available polecat.\"\n   ```\n5. If directory exists but session dead ‚Üí skip (zombie detection handles it)\n6. If session alive ‚Üí not an orphan, skip","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-cxu6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Inspect all active polecats","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"330f889f95b74fc9fd83f03ee32893162d5e8711d91573383dde38714501accb","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"End of patrol cycle decision.\n\n**If context LOW** (can continue patrolling):\n\nResolve your agent bead ID for this patrol cycle. You MUST replace `\u003cYOUR_RIG\u003e` below with your actual rig name (e.g., `beads`, `town`) before running:\n```bash\nbd list --type=agent --desc-contains=\"role_type: witness\" --json | jq -r '.[] | select(.status != \"closed\") | select(.description | test(\"(?m)^\\\\s*rig: \u003cYOUR_RIG\u003e\\\\s*$\")) | .id'\n```\nThis must return exactly one bead ID. If it returns zero results, STOP and report an error ‚Äî verify you substituted `\u003cYOUR_RIG\u003e` correctly. If it returns multiple results, STOP and report an error ‚Äî manual disambiguation is required. Use the single resolved bead ID as YOUR_AGENT_BEAD in the commands below.\n\nThen use await-signal with exponential backoff to wait for activity:\n\n```bash\ngt mol step await-signal --agent-bead YOUR_AGENT_BEAD \\\n  --backoff-base 30s --backoff-mult 2 --backoff-max 5m\n```\n\nThis command:\n1. Subscribes to `bd activity --follow` (beads activity feed)\n2. Returns IMMEDIATELY when any beads activity occurs\n3. If no activity, times out with exponential backoff:\n   - First timeout: 30s\n   - Second timeout: 60s\n   - Third timeout: 120s\n   - ...capped at 5 minutes max\n4. Tracks `idle:N` label on your agent bead for backoff state\n\n**On signal received** (activity detected):\nReset the idle counter and start next patrol cycle:\n```bash\ngt agent state YOUR_AGENT_BEAD --set idle=0\n```\n\n**On timeout** (no activity):\nThe idle counter was auto-incremented. Continue to next patrol cycle\n(the longer backoff will apply next time).\n\nAfter await-signal returns (either by signal or timeout):\n1. Generate a brief summary of this patrol cycle's observations\n2. Close current patrol and start next cycle:\n```bash\ngt patrol report --summary \"\u003cbrief summary of patrol observations\u003e\"\n```\nThis closes the current patrol wisp and automatically creates a new one.\n3. Continue executing from the first step of the new patrol cycle\n\n**If context HIGH** (approaching limit):\n1. Write handoff mail with notable observations:\n```bash\ngt handoff -s \"Witness patrol handoff\" -m \"\u003cobservations\u003e\"\n```\n2. Exit cleanly - the daemon will respawn a fresh Witness session\n\n**IMPORTANT**: You must either report and loop (context LOW) or exit (context HIGH).\nNever leave the session idle without work on your hook.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-vefw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Loop or exit for respawn","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"542d6ae1bc98a330aff0d320d6faf5dc955f75e56de5f6102ff14500d39b4357","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Check refinery and deacon health.\n\n**Step 1: Check refinery session**\n```bash\ngt session status \u003crig\u003e/refinery\n```\n\nIf MRs waiting AND refinery not running:\n```bash\ngt session start \u003crig\u003e/refinery\ngt mail send \u003crig\u003e/refinery -s \"PATROL: Wake up\" -m \"Merge requests in queue. Please process.\"\ngt mol step emit-event --channel refinery --type PATROL_WAKE \\\n  --payload source=witness --payload queue_depth=\u003cN\u003e\n```\n\n**Event emission**: Always emit a file event when waking the refinery.\nThis ensures the refinery's `await-event` unblocks instantly instead of\nwaiting for its next timeout cycle.\n\n**Step 2: Queue health analysis**\n\nRun the full queue view to get raw data for every open MR:\n```bash\ngt refinery ready --all --json\n```\n\nThis returns all open MRs with timestamps, assignees, and branch existence data.\nUse your judgment to assess the queue ‚Äî there are no hardcoded thresholds.\n\n**What to look for:**\n\n- **Stale claimed MRs**: MRs with a non-empty `Assignee` but old `UpdatedAt`.\n  Consider the queue size, time of day, and typical processing time.\n  A claimed MR that hasn't been updated in a while may indicate a stuck refinery.\n\n- **Orphaned branches**: MRs where both `BranchExistsLocal` and `BranchExistsRemote`\n  are false. The source branch may have been deleted while the MR bead is still open.\n  These likely need to be closed or investigated.\n\n- **Queue depth**: A large number of unclaimed MRs may indicate the refinery is down\n  or overwhelmed. Consider waking it or escalating.\n\n**Step 3: Check deacon health**\n\n‚ö†Ô∏è **The deacon tmux session is named `hq-deacon`** (NOT `deacon`).\nTown-level agents use the `hq-` prefix.\n\n```bash\ntmux has-session -t hq-deacon 2\u003e/dev/null \u0026\u0026 echo \"alive\" || echo \"dead\"\n```\n\nIf the deacon session is dead, escalate to Mayor:\n```bash\ngt mail send mayor/ -s \"ALERT: Deacon session hq-deacon is down\" \\\n  -m \"Deacon tmux session (hq-deacon) not found.\nDetected during witness patrol.\nPlease restart the deacon.\"\n```\n\n**Step 4: Escalate if needed**\n\nIf you identify problems, escalate to Deacon with specific MR IDs and context:\n```bash\ngt mail send deacon/ -s \"QUEUE_HEALTH: \u003csummary\u003e\" \\\n  -m \"MR IDs: \u003cids\u003e\nObservation: \u003cwhat you found\u003e\nRecommendation: \u003cwhat should happen\u003e\"\n```","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-wb2q","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Check refinery and deacon health","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"780a64fa7c16c7fb85f62b43a79245f0a1052356a698c053694dae69d5e5598c","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Process cleanup wisps (merge tracking and dirty state handling).\n\nCleanup wisps are created for two reasons:\n1. Pending MR: HandlePolecatDone creates a wisp in 'merge-requested' state\n   when a polecat has work in the refinery queue. These are resolved when\n   the MERGED signal arrives.\n2. Dirty state: When a polecat has uncommitted changes or unpushed commits\n   that need manual intervention.\n\n```bash\n# Find all cleanup wisps\nbd list --label cleanup --status=open\n```\n\nIf no wisps, skip this step (most common case in ephemeral model).\n\nFor each cleanup wisp, investigate and resolve the dirty state:\n\n## State: pending (needs investigation)\n\n1. **Extract polecat name** from wisp title/labels\n\n2. **Diagnose the problem**:\n```bash\ncd polecats/\u003cname\u003e\ngit status                    # What's uncommitted?\ngit stash list                # Any stashed work?\ngit log @{u}..HEAD     # Any unpushed commits?\n```\n\n3. **Resolution options**:\n   - **Uncommitted changes**: Commit and push, then nuke\n   - **Stashed work**: Pop and commit, or discard if not valuable\n   - **Unpushed commits**: Push to origin, then nuke\n   - **All valuable work lost**: Escalate to Deacon for recovery\n\n4. **If resolvable locally**: Fix and nuke\n```bash\n# Example: push unpushed commits\ngit push origin HEAD\n\n# Then nuke\ngt polecat nuke \u003cname\u003e\n\n# Close the wisp\nbd close \u003cwisp-id\u003e --reason \"Resolved: pushed commits, nuked\"\n```\n\n5. **If needs escalation**: Send RECOVERY_NEEDED to Deacon\n```bash\ngt mail send deacon/ -s \"RECOVERY_NEEDED \u003crig\u003e/\u003cpolecat\u003e\" \\\n  -m \"Cleanup Status: \u003cstatus\u003e\nBranch: \u003cbranch\u003e\nIssue: \u003cissue-id\u003e\n\nCannot auto-resolve. Please advise.\"\n```\nLeave wisp open until Deacon resolves.\n\n## State: merge-requested (legacy, rare)\n\nThis state was used before the ephemeral model. If found, the polecat is\nwaiting for a MERGED signal. The inbox-check step handles these.\n\n**Parallelism**: Use Task tool subagents to process multiple cleanups concurrently.\nEach cleanup is independent - perfect for parallel execution.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-wop6","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Process pending cleanup wisps","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c2986693028021f68c0ffe399127f271851ae1de57f361c0c9ec798880998198","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Verify inbox hygiene before ending patrol cycle.\n\n**Step 1: Check inbox state**\n```bash\ngt mail inbox\n```\n\nIn the persistent model, POLECAT_DONE messages create cleanup wisps and\nsend MERGE_READY to refinery. Inbox should contain ONLY:\n- Unprocessed messages (just arrived, will handle next cycle)\n- MERGED notifications (close cleanup wisp, then archive)\n\n**Step 2: Archive any stale messages**\n\nLook for messages that were processed but not archived:\n- POLECAT_STARTED older than this cycle ‚Üí archive\n- POLECAT_DONE that was processed (cleanup wisp created) ‚Üí archive\n- MERGED notifications ‚Üí archive after acknowledging\n- HELP/Blocked that was escalated ‚Üí archive\n- SWARM_START that created tracking wisp ‚Üí archive\n\n```bash\n# For each stale message found:\ngt mail archive \u003cmessage-id\u003e\n```\n\n**Step 3: Verify cleanup wisp hygiene**\n\nIn the persistent model, cleanup wisps track pending MRs and dirty state:\n```bash\nbd list --label cleanup --status=open\n```\n\n- state:pending ‚Üí Needs investigation in process-cleanups\n- state:merge-requested ‚Üí Legacy state, handle in inbox-check\n\nIf cleanup wisps are accumulating, investigate why polecats aren't clean.\n\n**Goal**: Inbox should be nearly empty. Cleanup wisps should be rare.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-xavw","is_template":0,"issue_type":"task","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"End-of-cycle inbox hygiene","updated_at":"2026-02-28T00:21:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/witness","await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e0fcef6aa4eb2836956c734d1f11c68180dad1ac701674350bb139b604e1e087","created_at":"2026-02-28T00:21:32Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Per-rig worker monitor patrol loop.\n\nThe Witness is the Pit Boss for your rig. You watch polecats, nudge them toward\ncompletion, verify clean git state before kills, and escalate stuck workers.\n\n**You do NOT do implementation work.** Your job is oversight, not coding.\n\n## Persistent Polecat Model (gt-4ac)\n\nPolecats persist after work completion ‚Äî sandbox is preserved for reuse:\n\n```\nPolecat lifecycle: spawning ‚Üí working ‚Üí mr_submitted ‚Üí idle (sandbox preserved)\nMR lifecycle:      created ‚Üí queued ‚Üí processed ‚Üí merged (Refinery handles)\n```\n\nOnce a polecat calls gt done and submits an MR, it transitions to idle state.\nThe MR lifecycle continues independently in the Refinery. The polecat is NOT\nnuked ‚Äî its sandbox is preserved for reuse by future slings.\n\n**CRITICAL**: Do NOT nuke polecats with pending MRs. The refinery needs the\nremote branch to exist to process the merge. Nuking deletes the remote branch\nand orphans the MR. See gt-6a9d.\n\n**Key principle**: Polecat lifecycle is separate from MR lifecycle. Polecats\ngo idle after work, they are NOT destroyed.\n\n## Design Philosophy\n\nThis patrol follows Gas Town principles:\n- **Discovery over tracking**: Observe reality each cycle, with minimal agent-bead state for duration tracking\n- **Events over state**: POLECAT_DONE mail triggers merge flow registration\n- **Persistent by default**: Clean polecats go idle, sandbox preserved for reuse (gt-4ac)\n- **Cleanup wisps for merge tracking**: Created when MR is pending in refinery\n- **Task tool for parallelism**: Subagents inspect polecats, not molecule arms\n- **Swim lane discipline**: Only close wisps YOU created. Wisp lifecycle for non-witness wisps is the reaper Dog's job. Report orphaned foreign wisps ‚Äî never close them.\n\n## Patrol Shape (Linear)\n\n```\ninbox-check ‚îÄ‚ñ∫ process-cleanups ‚îÄ‚ñ∫ check-refinery ‚îÄ‚ñ∫ survey-workers\n                                                            ‚îÇ\n         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n         ‚ñº\n  check-timer-gates ‚îÄ‚ñ∫ check-swarm ‚îÄ‚ñ∫ patrol-cleanup ‚îÄ‚ñ∫ context-check ‚îÄ‚ñ∫ loop-or-exit\n```\n\nNo dynamic arms. No fanout gates. No persistent nudge counters.\nState is discovered each cycle from reality (tmux, beads, mail).","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wisp-yrcp","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"mol-witness-patrol","updated_at":"2026-02-28T00:23:11Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Thirty-first consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T22:09:32Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T22:06:54Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Thirty-first consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-wk4p","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:09:32Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":"gastown/refinery","await_id":"","await_type":"","close_reason":"patrol cycle complete: Nineteenth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","closed_at":"2026-02-27T22:01:05Z","closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"e744710b4b5ddcfb1d9a3a957426a87d9b75eb6767d23eed49c763c3fc88e58e","created_at":"2026-02-27T21:55:30Z","created_by":"","crystallizes":0,"defer_until":null,"description":"Patrol report: Nineteenth consecutive empty patrol cycle. Queue empty, inbox clean. RSS: 3MB.","design":"","due_at":null,"ephemeral":1,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wisp-yvho","is_template":0,"issue_type":"epic","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"","payload":"","pinned":0,"priority":2,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"closed","target":"","timeout_ns":0,"title":"mol-refinery-patrol","updated_at":"2026-02-27T22:01:05Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"31c3bd7b5253a848a5cd1aba2eb1ca9ba3d9a2075d25ceedcf3c75456d59ce43","created_at":"2026-02-28T00:16:41Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"The witness needs the ability to detect when polecats are stuck ‚Äî sitting at idle prompts, looping on the same error, or not making progress. Detection methods: tmux capture-pane analysis, session age vs context usage, git commit frequency, repeated error patterns. This feeds into the blocker escalation system.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-wly","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat stuck detection: witness should detect idle/looping polecats","updated_at":"2026-02-28T00:16:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"3ceaf9f93d82f9f8a3e3ae4c261b5f31091c2ef69069944cfa3748278a971752","created_at":"2026-02-28T00:16:41Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"When a polecat is stuck (idle at prompt, looping, or blocked) for more than 10 minutes, the witness should automatically mail the mayor with actionable context: which polecat, what bead, what it's stuck on, and suggested actions (nudge, restart, nuke+resling). Currently stuck polecats go unnoticed until the mayor manually checks.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-yqo","is_template":0,"issue_type":"feature","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":1,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Polecat blocker escalation: auto-mail mayor when stuck \u003e10 min","updated_at":"2026-02-28T00:16:41Z","waiters":"","wisp_type":"","work_type":""}
{"acceptance_criteria":"","actor":"","agent_state":"","assignee":null,"await_id":"","await_type":"","close_reason":"","closed_at":null,"closed_by_session":"","compacted_at":null,"compacted_at_commit":null,"compaction_level":0,"content_hash":"c81014990d49b7163e0c976bd6536833ef4edb372d8cc88f22a8a32d866bf2b4","created_at":"2026-02-27T23:37:24Z","created_by":"mayor","crystallizes":0,"defer_until":null,"description":"Codex reads AGENTS.md as system context but doesn't auto-execute instructions from it like Claude does with CLAUDE.md. Claude sees 'run gt prime' in CLAUDE.md and runs it. Codex sees the same in AGENTS.md but just sits at its suggestion prompt waiting for user input.\n\nThe fix: when gt spawns a codex polecat session, it should pass 'gt prime' as the initial [PROMPT] argument to the codex CLI, e.g.:\n  codex -m gpt-5.3-codex --dangerously-bypass-approvals-and-sandbox 'gt prime'\n\nOr inject the prompt via tmux immediately after session start.\n\nThis is why all codex polecats sit idle after spawn ‚Äî they have the instructions but don't act on them. Combined with gt-3mk (nudges don't work on codex), this makes codex polecats effectively unable to self-start.","design":"","due_at":null,"ephemeral":0,"estimated_minutes":null,"event_kind":"","external_ref":null,"hook_bead":"","id":"gt-zkk","is_template":0,"issue_type":"bug","last_activity":null,"metadata":"{}","mol_type":"","notes":"","original_size":null,"owner":"shane.werner@gmail.com","payload":"","pinned":0,"priority":0,"quality_score":null,"rig":"","role_bead":"","role_type":"","sender":"","source_repo":"","source_system":"","spec_id":"","status":"open","target":"","timeout_ns":0,"title":"Codex polecats need initial prompt injection at session start","updated_at":"2026-02-27T23:37:24Z","waiters":"","wisp_type":"","work_type":""}
